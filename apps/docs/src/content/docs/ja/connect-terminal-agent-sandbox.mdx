---
title: Claude Agent SDK ã¨ Daytona ã‚’ä½¿ç”¨ã—ã¦ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’æ§‹ç¯‰ã™ã‚‹
description: Claude Code ã¨ Daytona ã®ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ã‚’ä½¿ã£ã¦è‡ªå¾‹å‹ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’æ§‹ç¯‰ã™ã‚‹ãŸã‚ã®ã‚¹ãƒ†ãƒƒãƒ—ãƒã‚¤ã‚¹ãƒ†ãƒƒãƒ—ã®ã‚¬ã‚¤ãƒ‰ã€‚
---

import { Image } from 'astro:assets'

import connectTerminalAgentSandboxResult from '../../../assets/docs/images/connect-terminal-agent-sandbox-result.gif'

ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€[Claude Code](https://code.claude.com/docs/en/overview) ã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ãŸè‡ªå¾‹å‹ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ã€Daytona ã®ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ç’°å¢ƒå†…ã§å®Ÿè¡Œã™ã‚‹æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ [Claude Agent SDK](https://platform.claude.com/docs/en/agent-sdk/overview) ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«å¾“ã£ã¦å‹•ä½œã—ã¾ã™ã€‚

ã“ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ã€ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ Web ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®é–‹ç™ºã€ä»»æ„ã®è¨€èªã§ã®ã‚³ãƒ¼ãƒ‰è¨˜è¿°ã€ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å®Ÿè¡ŒãŒå¯èƒ½ã§ã™ã€‚ã¾ãŸã€é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ãƒ»ç®¡ç†ã—ã€ç¨¼åƒä¸­ã®ã‚¢ãƒ—ãƒªå‘ã‘ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒªãƒ³ã‚¯ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

***

### 1. ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®æ¦‚è¦ \{#1-workflow-overview\}

ãƒ¡ã‚¤ãƒ³ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’èµ·å‹•ã™ã‚‹ã¨ã€Daytona ã®ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ãŒä½œæˆã•ã‚Œã€ãã®ä¸­ã§ Python ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒåˆæœŸåŒ–ã•ã‚Œã¾ã™ã€‚ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ [Claude Agent SDK](https://platform.claude.com/docs/en/agent-sdk/overview) ã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ã¦ã„ã¾ã™ã€‚

ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¨ã¯ã€ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã®ãƒãƒ£ãƒƒãƒˆã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’é€šã˜ã¦å¯¾è©±ã—ã¾ã™ã€‚ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ã‚ãªãŸã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹å†…ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«é€ä¿¡ã—ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒãã‚Œã‚’å®Ÿè¡Œã—ã¦çµæœã‚’è¿”ã—ã¾ã™ã€‚

<details>
  <summary>ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ä¾‹ã‚’è¡¨ç¤º</summary>

  <div>
    ```
    $ npm run start                                   174s
    Creating sandbox...
    Installing Agent SDK...
    Initializing Agent SDK...
    Press Ctrl+C at any time to exit.
    User: Build a Zelda-like game where I can move around the screen and talk to famous programmers
    Thinking...
    I'll build a Zelda-like game for you! This will be a fun project with player movement and NPC interactions with famous programmers.
    ğŸ”¨ Write
    ğŸ”¨ Write
    Now let me start a simple HTTP server to host the game:
    ğŸ”¨ Bash
    Perfect! I've created a Zelda-like game called "Programmer's Quest" for you! ğŸ®

    ## Game Features:

    âœ¨ Zelda-style gameplay:
    - Top-down 2D view with classic retro aesthetics
    - Player character with sword and shield
    - Grid-based movement system
    - Environmental obstacles (trees and rocks)

    ğŸ‘¥ Famous Programmers as NPCs:
    1. Linus Torvalds - Creator of Linux
    2. Grace Hopper - COBOL pioneer and Admiral
    3. Alan Turing - Father of computer science
    4. Ada Lovelace - First computer programmer
    5. Dennis Ritchie - Creator of C and UNIX

    ğŸ® Controls:
    - Arrow Keys or WASD - Move your character
    - SPACE - Talk to NPCs when you're near them

    ğŸŒŸ Gameplay:
    - Explore the grassy map and find all 5 legendary programmers
    - Each NPC has multiple quotes that cycle when you talk to them
    - NPCs glow when you're near them
    - Dialog boxes appear with their famous quotes
    - Track your progress in the HUD

    ## Play Now:
    ğŸ¯ [Click here to play the game!](https://80-8e2c4d23-212a-4f1e-bb6c-abfa71aeed3a.proxy.daytona.works)

    The game features smooth movement, collision detection with trees and rocks, and an immersive dialog system. Try to find and talk to all 5 famous programmers to learn their wisdom! Each has 3 different quotes that cycle as you keep talking to them.

    Enjoy your adventure! ğŸ—¡ï¸âœ¨
    User:
    ```
  </div>
</details>

ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ Web ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ›ã‚¹ãƒˆã—ã€[Daytona Preview Links](https://www.daytona.io/docs/en/preview-and-authentication/) æ©Ÿèƒ½ã‚’ä½¿ã£ã¦ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒªãƒ³ã‚¯ã‚’æä¾›ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚ã‚¿ã‚¹ã‚¯ã« Web ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œã¾ãŸã¯ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒå«ã¾ã‚Œã¦ã„ã‚‹å ´åˆã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ãã®å¿…è¦æ€§ã‚’è‡ªå‹•çš„ã«åˆ¤æ–­ã—ã€ã‚¢ãƒ—ãƒªã‚’ãƒ›ã‚¹ãƒˆã—ã¦ã€ãƒ©ã‚¤ãƒ–ã®çµæœã‚’ç¢ºèªã§ãã‚‹ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒªãƒ³ã‚¯ã‚’ç”Ÿæˆã—ã¾ã™ã€‚

<Image src={connectTerminalAgentSandboxResult} alt="ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ã‚ˆã£ã¦ç”Ÿæˆã•ã‚ŒãŸ RPG ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¢" width={600} style="max-width: 100%; height: auto; margin: 1rem 0;" />

ä½œæ¥­ãŒå®Œäº†ã™ã‚‹ã¾ã§ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ã®å¯¾è©±ã‚’ç¶šã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’çµ‚äº†ã™ã‚‹ã¨ã€ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ã¯è‡ªå‹•çš„ã«å‰Šé™¤ã•ã‚Œã¾ã™ã€‚

### 2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— \{#2-project-setup\}

#### ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã™ã‚‹ \{#clone-the-repository\}

ã¾ãšã€Daytona ã® [ãƒªãƒã‚¸ãƒˆãƒª](https://github.com/daytonaio/daytona.git) ã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã—ã€example ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã¾ã™ã€‚

```bash
git clone https://github.com/daytonaio/daytona.git
cd daytona/guides/typescript/claude-agent-sdk
```

#### ç’°å¢ƒã‚’è¨­å®šã™ã‚‹ \{#configure-environment\}

API ã‚­ãƒ¼ã‚’å–å¾—ã—ã¾ã™ï¼š

* **Daytona API ã‚­ãƒ¼:** [Daytona Dashboard](https://app.daytona.io/dashboard/keys)
* **Anthropic API ã‚­ãƒ¼:** [Anthropic Console](https://console.anthropic.com/)

`.env.example` ã‚’ `.env` ã«ã‚³ãƒ”ãƒ¼ã—ã€å–å¾—ã—ãŸã‚­ãƒ¼ã‚’è¿½åŠ ã—ã¾ã™ï¼š

```bash
DAYTONA_API_KEY=your_daytona_key
SANDBOX_ANTHROPIC_API_KEY=your_anthropic_key
```

:::caution[API Key ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£]
æ³¨æ„ï¼š`SANDBOX_ANTHROPIC_API_KEY` ã‚­ãƒ¼ã¯ Daytona ã®ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ç’°å¢ƒã«æ¸¡ã•ã‚Œã€ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹å†…ã§å®Ÿè¡Œã•ã‚Œã‚‹ä»»æ„ã®ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã§ã™ã€‚
:::

#### ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®ä½¿ç”¨ \{#local-usage\}

:::note[Node.js ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³]
ã“ã®ã‚µãƒ³ãƒ—ãƒ«ã‚’å®Ÿè¡Œã™ã‚‹ã«ã¯ Node.js 18 ä»¥ä¸ŠãŒå¿…è¦ã§ã™ã€‚å…ˆã«é€²ã‚€å‰ã«ã€ã”åˆ©ç”¨ã®ç’°å¢ƒãŒã“ã®è¦ä»¶ã‚’æº€ãŸã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚
:::

ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™:

```bash
npm install
```

ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’å®Ÿè¡Œã™ã‚‹:

```bash
npm run start
```

ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒèµ·å‹•ã—ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®å…¥åŠ›ã‚’å¾…æ©Ÿã—ã¾ã™ã€‚

### 3. ä½¿ç”¨ä¾‹ \{#3-example-usage\}

ãƒãƒ£ãƒƒãƒˆã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ä¾‹:

<details>
  <summary>ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒãƒ£ãƒƒãƒˆã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ä¾‹ã‚’è¡¨ç¤º</summary>

  <div>
    ```
    $ npm run start
    Creating sandbox...
    Installing Agent SDK...
    Initializing Agent SDK...
    Press Ctrl+C at any time to exit.
    User: Create a fun pet store landing page in Svelte
    Thinking...
    I'll create a fun pet store landing page in Svelte for you! Let me set up the project and build an engaging landing page with animations and a colorful design.
    ğŸ”¨ Bash
    ğŸ”¨ Bash
    Now let me create a fun and engaging pet store landing page with animations, colorful sections, and interactive elements:
    ğŸ”¨ Read
    > ğŸ”¨ Write
    Now let me create the component files:
    ğŸ”¨ Write
    ğŸ”¨ Write
    ğŸ”¨ Write
    ğŸ”¨ Write
    ğŸ”¨ Write
    Now let's update the main CSS file and start the development server:
    ğŸ”¨ Read
    ğŸ”¨ Write
    Now let's start the development server:
    ğŸ”¨ Bash
    ğŸ”¨ TaskOutput
    Perfect! ğŸ‰ I've created a fun and colorful pet store landing page in Svelte! Here's what I built:

    ## Features:

    âœ¨ Hero Section

    - Beautiful gradient background with animated floating cards
    - Eye-catching navigation bar
    - Call-to-action buttons with hover effects
    - Bouncing emoji animations

    ğŸ¯ Features Section

    - 4 key benefits (Free Delivery, Premium Quality, Special Offers, Award Winning)
    - Interactive cards with hover animations
    - Icons that rotate and scale on hover

    ğŸ›ï¸ Products Section

    - 6 featured products with colorful backgrounds
    - Star ratings
    - Add to cart functionality
    - Smooth hover animations

    ğŸ“§ Newsletter Section

    - Vibrant gradient background with floating pet emojis
    - Email subscription form
    - Success message animation
    - Special 20% off offer

    ğŸ‘£ Footer

    - Comprehensive navigation links
    - Social media icons
    - Dark gradient design

    ## Live Preview:

    Your pet store is now running at: https://80-b3739199-d90e-4bde-ab18-450d74c950e8.proxy.daytona.works

    The page includes:

    - Smooth scroll behavior
    - Responsive design for mobile devices
    - Fun animations throughout
    - Interactive elements with hover effects
    - Colorful gradients and modern styling
    - Emoji-based icons for a playful feel

    Click the link to see your fun pet store landing page in action! ğŸ¾
    User:

    ```
  </div>
</details>

### 4. ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’ç†è§£ã™ã‚‹ \{#4-understanding-the-agents-architecture\}

ã“ã®ä¾‹ã¯ã€æ¬¡ã® 2 ã¤ã®ä¸»è¦ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚

* **ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚°ãƒ©ãƒ :** ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ã€ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§å®Ÿè¡Œã•ã‚Œã‚‹ Node.js ã‚¹ã‚¯ãƒªãƒ—ãƒˆ (`index.ts`) ã§ã™ã€‚Daytona SDK ã‚’ä½¿ç”¨ã—ã¦ Daytona ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ã‚’ä½œæˆãŠã‚ˆã³ç®¡ç†ã—ã¾ã™ã€‚ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ã€ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹å†…ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨å¯¾è©±ã™ã‚‹ãŸã‚ã®ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æä¾›ã—ã¾ã™ã€‚
* **ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ:** ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ã€Daytona ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹å†…ã§å®Ÿè¡Œã•ã‚Œã‚‹ Python ã‚¹ã‚¯ãƒªãƒ—ãƒˆ (`coding_agent.py`) ã§ã™ã€‚Claude Agent SDK ã‚’ä½¿ç”¨ã—ã¦ã€Claude Code ã«ä¼¼ãŸã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã•ã‚ŒãŸã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚

#### åˆæœŸåŒ– \{#initialization\}

åˆæœŸåŒ–æ™‚ã«ã€ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯æ¬¡ã®å‡¦ç†ã‚’è¡Œã„ã¾ã™ã€‚

1. ç’°å¢ƒå¤‰æ•°ã« Anthropic ã® API ã‚­ãƒ¼ã‚’å«ã‚ãŸã€æ–°ã—ã„ [Daytona ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹](/docs/ja/sandbox-management) ã‚’ä½œæˆã—ã¾ã™ã€‚
2. ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹å†…ã§ `pip install` ã‚’å®Ÿè¡Œã—ã€[ãƒ—ãƒ­ã‚»ã‚¹å®Ÿè¡Œ](/docs/ja/process-code-execution#process-execution) ã‚’ä½¿ã£ã¦ Claude Agent SDK ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚
3. æ–°ã—ã„ [ã‚³ãƒ¼ãƒ‰ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ](/docs/ja/process-code-execution#stateful-code-interpreter) ã‚’ä½œæˆã—ã¾ã™ã€‚
4. [ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰](/docs/file-system-operations#uploading-a-single-file) ã‚’ä½¿ã£ã¦ã€ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚
5. ã‚³ãƒ¼ãƒ‰ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå†…ã§ `import coding_agent` ã‚’å®Ÿè¡Œã—ã¦ã€Claude Agent SDK ã‚’åˆæœŸåŒ–ã—ã¾ã™ã€‚
6. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®å…¥åŠ›ã‚’å¾…ã¡ã€ä»¥ä¸‹ã®ã¨ãŠã‚Šã‚³ãƒ¼ãƒ‰ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå†…ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’é€ä¿¡ã—ã¾ã™ã€‚

#### ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ã‚³ãƒ¼ãƒ‰ \{#main-program-code\}

ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒç¨¼åƒã™ã‚‹ã¨ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã‚’èª­ã¿å–ã‚‹ãŸã‚ã® readline ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’ä½œæˆã—ã€ãã®å…¥åŠ›ã‚’ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«é€ä¿¡ã—ã¾ã™ã€‚
å„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯ã€ã‚³ãƒ¼ãƒ‰ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå†…ã§ Python ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«æ¸¡ã•ã‚Œã¾ã™ã€‚

```typescript
 const result = await sandbox.codeInterpreter.runCode(
  `coding_agent.run_query_sync(os.environ.get('PROMPT', ''))`,
  {
    context: ctx,
    envs: { PROMPT: prompt },
    onStdout,
    onStderr,
  }
);
```

`onStdout` ã¨ `onStderr` ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã¯ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å‡ºåŠ›ã‚’ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚°ãƒ©ãƒ å´ã¸è¿”ã™ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¸ã®å¿œç­”å‡¦ç†ã‚’çµ‚ãˆã‚‹ã¨ã€ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯æ¬¡ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã‚’å¾…æ©Ÿã—ã¾ã™ã€‚

#### ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ã‚³ãƒ¼ãƒ‰ \{#sandbox-agent-code\}

ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ã€Claude Code ã‚’åŸºç›¤ã¨ã—ãŸã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ãªã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹ãŸã‚ã«ã€[Claude Agent SDK](https://platform.claude.com/docs/en/agent-sdk/overview) ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ã€ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¨ã€[ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ URL ã®å½¢å¼](/docs/ja/preview-and-authentication) ã®ä¾‹ã‚’å«ã‚€ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§åˆæœŸåŒ–ã•ã‚Œã¾ã™ã€‚

```python
system_prompt = """
You are running in a Daytona sandbox.
Use the /home/daytona directory instead of /workspace for file operations.
Your public preview URL for port 80 is: {}.
""".format(preview_url)
```

ã¾ãŸã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒä½¿ç”¨ã™ã‚‹[ãƒ„ãƒ¼ãƒ«ã¨ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ãƒ¢ãƒ¼ãƒ‰](https://platform.claude.com/docs/en/agent-sdk/quickstart#key-concepts)ã‚‚æŒ‡å®šã—ã¾ã™ã€‚

```python
client = ClaudeSDKClient(
  options=ClaudeAgentOptions(
    allowed_tools=["Read", "Edit", "Glob", "Grep", "Bash"],
    permission_mode="acceptEdits",
    system_prompt=system_prompt
  )
)
```

ã‚¯ã‚¨ãƒªã‚’å®Ÿè¡Œã—ã¦ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å—ã‘å–ã‚‹ãŸã‚ã®ã‚³ãƒ¼ãƒ‰ã¯ã€Anthropic ã® [Claude Agent Python SDK ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://platform.claude.com/docs/en/agent-sdk/python) ã«æ²è¼‰ã•ã‚Œã¦ã„ã‚‹ã‚µãƒ³ãƒ—ãƒ«ã«æº–æ‹ ã—ã¦ã„ã¾ã™ã€‚

#### ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ— \{#clean-up\}

ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’çµ‚äº†ã™ã‚‹ã¨ã€Daytona ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ã¨ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯è‡ªå‹•çš„ã«å‰Šé™¤ã•ã‚Œã¾ã™ã€‚

**ä¸»ãªåˆ©ç‚¹:**

* Daytona ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹å†…ã§ã®å®‰å…¨ã‹ã¤åˆ†é›¢ã•ã‚ŒãŸå®Ÿè¡Œç’°å¢ƒ
* ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‹ã‚‰ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ç›´æ¥ã‚„ã‚Šå–ã‚Šã§ãã¾ã™
* é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®è‡ªå‹•æ¤œå‡ºã¨ãƒ©ã‚¤ãƒ–ãªãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒªãƒ³ã‚¯
* è¤‡æ•°ã®è¨€èªãŠã‚ˆã³ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯é–‹ç™ºã«å¯¾å¿œ
* ã‚·ãƒ³ãƒ—ãƒ«ãªã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¨è‡ªå‹•ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—