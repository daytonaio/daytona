---
title: カスタムドメイン／認証
description: プレビュー用プロキシを独自のドメインとロジックでカスタマイズします。
---

Daytona では、サンドボックスのプレビュー URL を処理するために、独自のカスタムプレビュー用プロキシをデプロイできます。これにより、カスタムドメイン、認証、エラーハンドリング、スタイリングなど、プレビュー体験を完全にコントロールできます。

**カスタムプレビュー用プロキシでできること:**

* **カスタムドメイン:** 独自ドメインでプロキシをホスト（例：`preview.yourcompany.com`）
* **ユーザー認証:** プライベートプレビュー向けに独自の認証ロジックを実装
* **スマートなサンドボックス管理:** ユーザー転送前に停止中のサンドボックスを自動起動
* **カスタムエラーページ:** ブランドに合わせてエラーページのデザインを統一
* **プレビュー警告の制御:** Daytona のプレビュー警告を無効化
* **CORS 管理:** Daytona の既定の CORS 設定をオーバーライド

***

## 仕組み \{#how-it-works\}

ユーザーがプレビューURLにアクセスすると、カスタムプロキシがリクエストを受け取り、次の処理を行えます：

1. 独自のロジックで**ユーザーを認証**する
2. **サンドボックスの状態を確認**し、必要に応じて起動する
3. **リクエストを実際のサンドボックスへ転送**する
4. **レスポンスを処理**し、独自のスタイルやエラーページを適用する
5. Daytona の動作を制御するために**カスタムヘッダーを送信**する

***

## Daytona ヘッダー \{#daytona-headers\}

プロキシは、Daytona の動作を制御するための特別なヘッダーを送信できます。

#### プレビュー警告を無効化する \{#disable-preview-warning\}

Daytona のプレビュー警告ページを無効にするには、次を送信します：

```
X-Daytona-Skip-Preview-Warning: true
```

#### CORS を無効化する \{#disable-cors\}

Daytona の既定の CORS 設定を上書きするには、次を送信してください:

```
X-Daytona-Disable-CORS: true
```

### 最終アクティビティ更新の無効化 \{#disable-last-activity-update\}

プレビュー時にサンドボックスの最終アクティビティ更新を行わないようにするには、`X-Daytona-Skip-Last-Activity-Update` ヘッダーを `true` に設定します。
これにより、[自動停止が有効](/docs/sandbox-management#auto-stop-interval)なサンドボックスについて、Daytona が維持目的で起動状態を保ち続けることを防げます。

```bash
curl -H "X-Daytona-Skip-Last-Activity-Update: true" \
https://3000-sandbox-123456.proxy.daytona.work
```

### 認証 \{#authentication\}

プライベートなプレビューリンクの場合、ユーザーは次を送信する必要があります:

```
X-Daytona-Preview-Token: {sandboxToken}
```

`sandboxToken` は [Daytona SDK もしくは API](/docs/ja/preview-and-authentication) で取得できます。

***

## 例 \{#examples\}

カスタムプレビュー用プロキシのサンプルは、当社の [GitHub](https://github.com/daytonaio/daytona-proxy-samples)でご覧いただけます:

* [TypeScript の例](https://github.com/daytonaio/daytona-proxy-samples/tree/main/typescript)
* [Go の例](https://github.com/daytonaio/daytona-proxy-samples/tree/main/go)