---
title: ファイルシステム操作
---

import { TabItem, Tabs } from '@astrojs/starlight/components'

DaytonaのTS SDK / Python SDKは、サンドボックス内の`fs`モジュールを通じて、充実したファイルシステム操作を提供します。本ガイドでは、利用可能なすべてのファイルシステム操作とベストプラクティスを解説します。

## 基本操作 \{#basic-operations\}

Daytona SDK では、Python、TypeScript、Ruby を使用してサンドボックス内のファイルシステムを操作するための機能を提供しています。ファイル一覧の取得、ディレクトリの作成、ファイルの読み書きなど、さまざまな操作を実行できます。

ファイル操作は、サンドボックスユーザーのホームディレクトリで作業していることを前提としています（例: `workspace` は `/home/[username]/workspace` を指します）。絶対パスを指定する場合は、先頭に `/` を付けてください。

### ファイルとディレクトリの一覧 \{#listing-files-and-directories\}

Daytona SDK では、Python、TypeScript、Ruby を使用してサンドボックス内のファイルやディレクトリを一覧できます。

<Tabs syncKey="language">
  <TabItem label="Python" icon="seti:python">
    ```python
    # ディレクトリ内のファイルを一覧
    files = sandbox.fs.list_files("workspace")

    for file in files:
        print(f"Name: {file.name}")
        print(f"Is directory: {file.is_dir}")
        print(f"Size: {file.size}")
        print(f"Modified: {file.mod_time}")

    ```
  </TabItem>

  <TabItem label="TypeScript" icon="seti:typescript">
    ```typescript
    // ディレクトリ内のファイルを一覧
    const files = await sandbox.fs.listFiles("workspace")

    files.forEach(file => {
        console.log(`Name: ${file.name}`)
        console.log(`Is directory: ${file.isDir}`)
        console.log(`Size: ${file.size}`)
        console.log(`Modified: ${file.modTime}`)
    })
    ```
  </TabItem>

  <TabItem label="Ruby" icon="seti:ruby">
    ```ruby
    # ディレクトリ内のファイルを一覧
    files = sandbox.fs.list_files('workspace')

    files.each do |file|
      puts "Name: #{file.name}"
      puts "Is directory: #{file.is_dir}"
      puts "Size: #{file.size}"
      puts "Modified: #{file.mod_time}"
    end
    ```
  </TabItem>
</Tabs>

参照: [list&#95;files (Python SDK)](/docs/python-sdk/sync/file-system/#filesystemlist_files), [listFiles (TypeScript SDK)](/docs/typescript-sdk/file-system/#listfiles), [list&#95;files (Ruby SDK)](/docs/ruby-sdk/file-system/#list_files)

### ディレクトリの作成 \{#creating-directories\}

Daytona SDK では、Python、TypeScript、Ruby を使用して特定の権限を指定してディレクトリを作成できます。

<Tabs syncKey="language">
  <TabItem label="Python" icon="seti:python">
    ```python
    # 権限を指定して作成
    sandbox.fs.create_folder("workspace/new-dir", "755")
    ```
  </TabItem>

  <TabItem label="TypeScript" icon="seti:typescript">
    ```typescript
    // 権限を指定して作成
    await sandbox.fs.createFolder("workspace/new-dir", "755")
    ```
  </TabItem>

  <TabItem label="Ruby" icon="seti:ruby">
    ```ruby
    # 権限を指定して作成
    sandbox.fs.create_folder('workspace/new-dir', '755')
    ```
  </TabItem>
</Tabs>

参照: [create&#95;folder (Python SDK)](/docs/python-sdk/sync/file-system/#filesystemcreate_folder), [createFolder (TypeScript SDK)](/docs/typescript-sdk/file-system/#createfolder), [create&#95;folder (Ruby SDK)](/docs/ruby-sdk/file-system/#create_folder)

### ファイルのアップロード \{#uploading-files\}

Daytona SDK は、Python、TypeScript、Ruby を用いてサンドボックス内のファイルを読み取り、書き込み、アップロード、ダウンロード、削除できる機能を提供します。

#### 単一ファイルのアップロード \{#uploading-a-single-file\}

以下は、単一のファイルをアップロードする例です:

<Tabs syncKey="language">
  <TabItem label="Python" icon="seti:python">
    ```python
    # 単一のファイルをアップロード
    with open("local_file.txt", "rb") as f:
        content = f.read()
    sandbox.fs.upload_file(content, "remote_file.txt")
    ```
  </TabItem>

  <TabItem label="TypeScript" icon="seti:typescript">
    ```typescript
    // 単一のファイルをアップロード
    const fileContent = Buffer.from('Hello, World!')
    await sandbox.fs.uploadFile(fileContent, "data.txt")
    ```
  </TabItem>

  <TabItem label="Ruby" icon="seti:ruby">
    ```ruby
    # 単一のファイルをアップロード
    content = 'Hello, World!'
    sandbox.fs.upload_file(content, 'data.txt')
    ```
  </TabItem>
</Tabs>

参考: [upload&#95;file (Python SDK)](/docs/python-sdk/sync/file-system/#filesystemupload_file), [uploadFile (TypeScript SDK)](/docs/typescript-sdk/file-system/#uploadfile), [upload&#95;file (Ruby SDK)](/docs/ruby-sdk/file-system/#upload_file)

#### 複数ファイルのアップロード \{#uploading-multiple-files\}

次の例は、1回のメソッド呼び出しで複数のファイルを効率的にアップロードする方法を示します。

<Tabs syncKey="language">
  <TabItem label="Python" icon="seti:python">
    ```python
    # 複数のファイルを一度にアップロードする
    files_to_upload = []

    with open("file1.txt", "rb") as f1:
        files_to_upload.append(FileUpload(
            source=f1.read(),
            destination="data/file1.txt",
        ))

    with open("file2.txt", "rb") as f2:
        files_to_upload.append(FileUpload(
            source=f2.read(),
            destination="data/file2.txt",
        ))

    with open("settings.json", "rb") as f3:
        files_to_upload.append(FileUpload(
            source=f3.read(),
            destination="config/settings.json",
        ))

    sandbox.fs.upload_files(files_to_upload)

    ```
  </TabItem>

  <TabItem label="TypeScript" icon="seti:typescript">
    ```typescript
    // 複数のファイルを一度にアップロードする
    const files = [
        {
            source: Buffer.from('Content of file 1'),
            destination: 'data/file1.txt',
        },
        {
            source: Buffer.from('Content of file 2'),
            destination: 'data/file2.txt',
        },
        {
            source: Buffer.from('{"key": "value"}'),
            destination: 'config/settings.json',
        }
    ]

    await sandbox.fs.uploadFiles(files)
    ```
  </TabItem>

  <TabItem label="Ruby" icon="seti:ruby">
    ```ruby
    # 複数のファイルを一度にアップロードする
    files = [
      Daytona::FileUpload.new('Content of file 1', 'data/file1.txt'),
      Daytona::FileUpload.new('Content of file 2', 'data/file2.txt'),
      Daytona::FileUpload.new('{"key": "value"}', 'config/settings.json')
    ]

    sandbox.fs.upload_files(files)
    ```
  </TabItem>
</Tabs>

参照: [upload&#95;files（Python SDK）](/docs/python-sdk/sync/file-system/#filesystemupload_files)、[uploadFiles（TypeScript SDK）](/docs/typescript-sdk/file-system/#uploadfiles)、[upload&#95;files（Ruby SDK）](/docs/ruby-sdk/file-system/#upload_files)

### ファイルをダウンロードする \{#downloading-files\}

#### 単一ファイルのダウンロード \{#downloading-a-single-file\}

次のコマンドは、サンドボックスの作業ディレクトリから `file1.txt` を1件ダウンロードし、その内容を出力します:

<Tabs syncKey="language">
  <TabItem label="Python" icon="seti:python">
    ```python

    content = sandbox.fs.download_file("file1.txt")

    with open("local_file.txt", "wb") as f:
        f.write(content)

    print(content.decode('utf-8'))

    ```
  </TabItem>

  <TabItem label="TypeScript" icon="seti:typescript">
    ```typescript

    const downloadedFile = await sandbox.fs.downloadFile("file1.txt")

    console.log('File content:', downloadedFile.toString())

    ```
  </TabItem>

  <TabItem label="Ruby" icon="seti:ruby">
    ```ruby

    # ファイルをダウンロードして Tempfile の参照を取得
    file = sandbox.fs.download_file('file1.txt')

    # 内容を読み込む
    puts "File content: #{file.open.read}"

    # またはダウンロードして特定のパスに保存
    sandbox.fs.download_file('file1.txt', 'local_file.txt')

    ```
  </TabItem>
</Tabs>

参照: [download&#95;file (Python SDK)](/docs/python-sdk/sync/file-system/#filesystemdownload_file), [downloadFile (TypeScript SDK)](/docs/typescript-sdk/file-system/#downloadfile), [download&#95;file (Ruby SDK)](/docs/ruby-sdk/file-system/#download_file)

#### 複数ファイルのダウンロード \{#downloading-multiple-files\}

次の例では、単一のメソッド呼び出しで複数のファイルを効率的にダウンロードする方法を示します。

<Tabs syncKey="language">
  <TabItem label="Python" icon="seti:python">
    ```python
    # 複数ファイルをまとめてダウンロード
    files_to_download = [
        FileDownloadRequest(source="data/file1.txt"), # 保存先なし - メモリにダウンロード
        FileDownloadRequest(source="data/file2.txt", destination="local_file2.txt"), # ローカルファイルにダウンロード
    ]

    results = sandbox.fs.download_files(files_to_download)

    for result in results:
        if result.error:
            print(f"Error downloading {result.source}: {result.error}")
        elif result.result:
            print(f"Downloaded {result.source} to {result.result}")

    ```
  </TabItem>

  <TabItem label="TypeScript" icon="seti:typescript">
    ```typescript
    // 複数ファイルをまとめてダウンロード
    const files = [
        { source: "data/file1.txt" }, // 保存先なし - メモリにダウンロード
        { source: "data/file2.txt", destination: "local_file2.txt" }, // ローカルファイルにダウンロード
    ]

    const results = await sandbox.fs.downloadFiles(files)

    results.forEach(result => {
        if (result.error) {
            console.error(`Error downloading ${result.source}: ${result.error}`)
        } else if (result.result) {
            console.log(`Downloaded ${result.source} to ${result.result}`)
        }
    })
    ```
  </TabItem>

  <TabItem label="Ruby" icon="seti:ruby">
    ```ruby
    # 複数ファイルをまとめてダウンロード
    files = [
      Daytona::FileDownloadRequest.new(source: 'data/file1.txt'), # 保存先なし - メモリにダウンロード
      Daytona::FileDownloadRequest.new(source: 'data/file2.txt', destination: 'local_file2.txt') # ローカルファイルにダウンロード
    ]

    results = sandbox.fs.download_files(files)

    results.each do |result|
      if result.error
        puts "Error downloading #{result.source}: #{result.error}"
      elsif result.result
        puts "Downloaded #{result.source} to #{result.result}"
      end
    end
    ```
  </TabItem>
</Tabs>

参照: [download&#95;files (Python SDK)](/docs/python-sdk/sync/file-system/#filesystemdownload_files), [downloadFiles (TypeScript SDK)](/docs/typescript-sdk/file-system/#downloadfiles), [download&#95;files (Ruby SDK)](/docs/ruby-sdk/file-system/#download_files)

### ファイルの削除 \{#deleting-files\}

次の例は、ファイルを削除する方法を示します。

<Tabs syncKey="language">
  <TabItem label="Python" icon="seti:python">
    ```python

    sandbox.fs.delete_file("workspace/file.txt")

    ```
  </TabItem>

  <TabItem label="TypeScript" icon="seti:typescript">
    ```typescript

    await sandbox.fs.deleteFile("workspace/file.txt")
    ```
  </TabItem>

  <TabItem label="Ruby" icon="seti:ruby">
    ```ruby

    sandbox.fs.delete_file('workspace/file.txt')

    ```
  </TabItem>
</Tabs>

参照: [delete&#95;file（Python SDK）](/docs/python-sdk/sync/file-system/#filesystemdelete_file)、[deleteFile（TypeScript SDK）](/docs/typescript-sdk/file-system/#deletefile)、[delete&#95;file（Ruby SDK）](/docs/ruby-sdk/file-system/#delete_file)

## 高度な操作 \{#advanced-operations\}

Daytona SDK は、ファイルのアクセス権や検索・置換など、より高度なファイルシステム操作を提供します。

### ファイル権限 \{#file-permissions\}

Daytona SDK では、Python、TypeScript、および Ruby を用いて、ファイル権限の設定・取得や、ディレクトリ権限の再帰的な設定を行うための機能を提供しています。

<Tabs syncKey="language">
  <TabItem label="Python" icon="seti:python">
    ```python
    # ファイル権限を設定
    sandbox.fs.set_file_permissions("workspace/file.txt", "644")

    # ファイル権限を取得

    file_info = sandbox.fs.get_file_info("workspace/file.txt")
    print(f"Permissions: {file_info.permissions}")

    ```
  </TabItem>

  <TabItem label="TypeScript" icon="seti:typescript">
    ```typescript
    // ファイル権限を設定
    await sandbox.fs.setFilePermissions("workspace/file.txt", { mode: "644" })

    // ファイル権限を取得
    const fileInfo = await sandbox.fs.getFileDetails("workspace/file.txt")
    console.log(`Permissions: ${fileInfo.permissions}`)
    ```
  </TabItem>

  <TabItem label="Ruby" icon="seti:ruby">
    ```ruby
    # ファイル権限を設定
    sandbox.fs.set_file_permissions('workspace/file.txt', '644')

    # ファイル権限を取得
    file_info = sandbox.fs.get_file_info('workspace/file.txt')
    puts "Permissions: #{file_info.permissions}"
    ```
  </TabItem>
</Tabs>

参照: [set&#95;file&#95;permissions (Python SDK)](/docs/python-sdk/sync/file-system/#filesystemset_file_permissions), [setFilePermissions (TypeScript SDK)](/docs/typescript-sdk/file-system/#setfilepermissions), [set&#95;file&#95;permissions (Ruby SDK)](/docs/ruby-sdk/file-system/#set_file_permissions)

### ファイルの検索と置換 \{#file-search-and-replace\}

Daytona SDK は、Python、TypeScript、および Ruby でファイル内のテキスト検索および置換を行う機能を提供します。

<Tabs syncKey="language">
  <TabItem label="Python" icon="seti:python">
    ```python
    # ファイル内のテキストを検索します。フォルダを指定した場合、再帰的に検索されます
    results = sandbox.fs.find_files(
        path="workspace/src",
        pattern="text-of-interest"
    )
    for match in results:
        print(f"Absolute file path: {match.file}")
        print(f"Line number: {match.line}")
        print(f"Line content: {match.content}")
        print("\n")

    # ファイル内のテキストを置換します

    sandbox.fs.replace_in_files(
        files=["workspace/file1.txt", "workspace/file2.txt"],
        pattern="old_text",
        new_value="new_text"
    )

    ```
  </TabItem>

  <TabItem label="TypeScript" icon="seti:typescript">
    ```typescript
    // ファイル内のテキストを検索します。フォルダを指定した場合、再帰的に検索されます
    const results = await sandbox.fs.findFiles({
        path="workspace/src",
        pattern: "text-of-interest"
    })
    results.forEach(match => {
        console.log('Absolute file path:', match.file)
        console.log('Line number:', match.line)
        console.log('Line content:', match.content)
    })

    // ファイル内のテキストを置換します
    await sandbox.fs.replaceInFiles(
        ["workspace/file1.txt", "workspace/file2.txt"],
        "old_text",
        "new_text"
    )
    ```
  </TabItem>

  <TabItem label="Ruby" icon="seti:ruby">
    ```ruby
    # ファイル内のテキストを検索します。フォルダを指定した場合、再帰的に検索されます
    results = sandbox.fs.find_files('workspace/src', 'text-of-interest')
    results.each do |match|
      puts "Absolute file path: #{match.file}"
      puts "Line number: #{match.line}"
      puts "Line content: #{match.content}"
    end

    # ファイル内のテキストを置換します
    sandbox.fs.replace_in_files(
      files: ['workspace/file1.txt', 'workspace/file2.txt'],
      pattern: 'old_text',
      new_value: 'new_text'
    )
    ```
  </TabItem>
</Tabs>

参照: [find&#95;files (Python SDK)](/docs/python-sdk/sync/file-system/#filesystemfind_files)、[replace&#95;in&#95;files (Python SDK)](/docs/python-sdk/sync/file-system/#filesystemreplace_in_files)、[findFiles (TypeScript SDK)](/docs/typescript-sdk/file-system/#findfiles)、[replaceInFiles (TypeScript SDK)](/docs/typescript-sdk/file-system/#replaceinfiles)、[find&#95;files (Ruby SDK)](/docs/ruby-sdk/file-system/#find_files)、[replace&#95;in&#95;files (Ruby SDK)](/docs/ruby-sdk/file-system/#replace_in_files)