---
title: ファイルシステム操作
---

import { TabItem, Tabs } from '@astrojs/starlight/components'

DaytonaのTS SDK / Python SDKは、サンドボックス内の`fs`モジュールを通じて、充実したファイルシステム操作を提供します。本ガイドでは、利用可能なすべてのファイルシステム操作とベストプラクティスを解説します。

## 基本操作 \{#basic-operations\}

Daytona SDK では、サンドボックス内のファイルシステムを操作するための機能を提供しています。ファイル一覧の取得、ディレクトリの作成、ファイルの読み書きなど、さまざまな操作を実行できます。

ファイル操作は、サンドボックスユーザーのホームディレクトリで作業していることを前提としています（例: `workspace` は `/home/[username]/workspace` を指します）。絶対パスを指定する場合は、先頭に `/` を付けてください。

### ファイルとディレクトリの一覧表示 \{#listing-files-and-directories\}

Daytona SDK では、Python と TypeScript を用いてサンドボックス内のファイルやディレクトリを一覧できます。

<Tabs>
  <TabItem label="Python" icon="seti:python">
    ```python
    # ディレクトリ内のファイルを一覧表示
    files = sandbox.fs.list_files("workspace")

    for file in files:
        print(f"Name: {file.name}")
        print(f"Is directory: {file.is_dir}")
        print(f"Size: {file.size}")
        print(f"Modified: {file.mod_time}")

    ```
  </TabItem>

  <TabItem label="TypeScript" icon="seti:typescript">
    ```typescript
    // ディレクトリ内のファイルを一覧表示
    const files = await sandbox.fs.listFiles("workspace")

    files.forEach(file => {
        console.log(`Name: ${file.name}`)
        console.log(`Is directory: ${file.isDir}`)
        console.log(`Size: ${file.size}`)
        console.log(`Modified: ${file.modTime}`)
    })
    ```
  </TabItem>
</Tabs>

参照: [list&#95;files (Python SDK)](/docs/python-sdk/sync/file-system/#filesystemlist_files), [listFiles (TypeScript SDK)](/docs/typescript-sdk/file-system/#listfiles)

### ディレクトリの作成 \{#creating-directories\}

Daytona SDK では、Python と TypeScript を用いて、指定したパーミッションでディレクトリを作成できます。

<Tabs>
  <TabItem label="Python" icon="seti:python">
    ```python
    # 指定したパーミッションで作成
    sandbox.fs.create_folder("workspace/new-dir", "755")
    ```
  </TabItem>

  <TabItem label="TypeScript" icon="seti:typescript">
    ```typescript
    // 指定したパーミッションで作成
    await sandbox.fs.createFolder("workspace/new-dir", "755")
    ```
  </TabItem>
</Tabs>

参照: [create&#95;folder (Python SDK)](/docs/python-sdk/sync/file-system/#filesystemcreate_folder)、[createFolder (TypeScript SDK)](/docs/typescript-sdk/file-system/#createfolder)

### ファイルのアップロード \{#uploading-files\}

Daytona SDK は、Python と TypeScript を用いてサンドボックス内のファイルを読み取り、書き込み、アップロード、ダウンロード、削除できる機能を提供します。

#### 単一ファイルのアップロード \{#uploading-a-single-file\}

以下は、単一のファイルをアップロードする方法の例です。

<Tabs>
  <TabItem label="Python" icon="seti:python">
    ```python
    # 単一ファイルをアップロード
    with open("local_file.txt", "rb") as f:
        content = f.read()
    sandbox.fs.upload_file(content, "remote_file.txt")
    ```
  </TabItem>

  <TabItem label="TypeScript" icon="seti:typescript">
    ```typescript
    // 単一ファイルをアップロード
    const fileContent = Buffer.from('Hello, World!')
    await sandbox.fs.uploadFile(fileContent, "data.txt")
    ```
  </TabItem>
</Tabs>

参照: [upload&#95;file（Python SDK）](/docs/python-sdk/sync/file-system/#filesystemupload_file), [uploadFile（TypeScript SDK）](/docs/typescript-sdk/file-system/#uploadfile)

#### 複数ファイルのアップロード \{#uploading-multiple-files\}

以下の例は、1回のメソッド呼び出しで複数のファイルを効率的にアップロードする方法を示します。

<Tabs>
  <TabItem label="Python" icon="seti:python">
    ```python
    # 複数のファイルをまとめてアップロードする
    files_to_upload = []

    with open("file1.txt", "rb") as f1:
        files_to_upload.append(FileUpload(
            source=f1.read(),
            destination="data/file1.txt",
        ))

    with open("file2.txt", "rb") as f2:
        files_to_upload.append(FileUpload(
            source=f2.read(),
            destination="data/file2.txt",
        ))

    with open("settings.json", "rb") as f3:
        files_to_upload.append(FileUpload(
            source=f3.read(),
            destination="config/settings.json",
        ))

    sandbox.fs.upload_files(files_to_upload)

    ```
  </TabItem>

  <TabItem label="TypeScript" icon="seti:typescript">
    ```typescript
    // 複数のファイルをまとめてアップロードする
    const files = [
        {
            source: Buffer.from('Content of file 1'),
            destination: 'data/file1.txt',
        },
        {
            source: Buffer.from('Content of file 2'),
            destination: 'data/file2.txt',
        },
        {
            source: Buffer.from('{"key": "value"}'),
            destination: 'config/settings.json',
        }
    ]

    await sandbox.fs.uploadFiles(files)
    ```
  </TabItem>
</Tabs>

参照: [upload&#95;files (Python SDK)](/docs/python-sdk/sync/file-system/#filesystemupload_files), [uploadFiles (TypeScript SDK)](/docs/typescript-sdk/file-system/#uploadfiles)

### ファイルをダウンロードする \{#downloading-files\}

#### 単一ファイルのダウンロード \{#downloading-a-single-file\}

次のコマンドは、サンドボックスの作業ディレクトリから `file1.txt` を1件ダウンロードし、内容を出力します。

<Tabs>
  <TabItem label="Python" icon="seti:python">
    ```python

    content = sandbox.fs.download_file("file1.txt")

    with open("local_file.txt", "wb") as f:
        f.write(content)

    print(content.decode('utf-8'))

    ```
  </TabItem>

  <TabItem label="TypeScript" icon="seti:typescript">
    ```typescript

    const downloadedFile = await sandbox.fs.downloadFile("file1.txt")

    console.log('File content:', downloadedFile.toString())

    ```
  </TabItem>
</Tabs>

参照: [download&#95;file (Python SDK)](/docs/python-sdk/sync/file-system/#filesystemdownload_file), [downloadFile (TypeScript SDK)](/docs/typescript-sdk/file-system/#downloadfile)

#### 複数ファイルのダウンロード \{#downloading-multiple-files\}

次の例は、1回のメソッド呼び出しで複数のファイルを効率よくダウンロードする方法を示します。

<Tabs>
  <TabItem label="Python" icon="seti:python">
    ```python
    # 複数のファイルをまとめてダウンロード
    files_to_download = [
        FileDownloadRequest(source="data/file1.txt"), # 保存先なし - メモリにダウンロード
        FileDownloadRequest(source="data/file2.txt", destination="local_file2.txt"), # ローカルファイルに保存
    ]

    results = sandbox.fs.download_files(files_to_download)

    for result in results:
        if result.error:
            print(f"Error downloading {result.source}: {result.error}")
        elif result.result:
            print(f"Downloaded {result.source} to {result.result}")

    ```
  </TabItem>

  <TabItem label="TypeScript" icon="seti:typescript">
    ```typescript
    // 複数のファイルをまとめてダウンロード
    const files = [
        { source: "data/file1.txt" }, // 保存先なし - メモリにダウンロード
        { source: "data/file2.txt", destination: "local_file2.txt" }, // ローカルファイルに保存
    ]

    const results = await sandbox.fs.downloadFiles(files)

    results.forEach(result => {
        if (result.error) {
            console.error(`Error downloading ${result.source}: ${result.error}`)
        } else if (result.result) {
            console.log(`Downloaded ${result.source} to ${result.result}`)
        }
    })
    ```
  </TabItem>
</Tabs>

参照: [download&#95;files (Python SDK)](/docs/python-sdk/sync/file-system/#filesystemdownload_files), [downloadFiles (TypeScript SDK)](/docs/typescript-sdk/file-system/#downloadfiles)

### ファイルの削除 \{#deleting-files\}

次の例は、ファイルを削除する方法を示します。

<Tabs>
  <TabItem label="Python" icon="seti:python">
    ```python

    sandbox.fs.delete_file("workspace/file.txt")

    ```
  </TabItem>

  <TabItem label="TypeScript" icon="seti:typescript">
    ```typescript

    await sandbox.fs.deleteFile("workspace/file.txt")
    ```
  </TabItem>
</Tabs>

参照: [delete&#95;file（Python SDK）](/docs/python-sdk/sync/file-system/#filesystemdelete_file)、[deleteFile（TypeScript SDK）](/docs/typescript-sdk/file-system/#deletefile)

## 高度な操作 \{#advanced-operations\}

Daytona SDK は、ファイルのアクセス権や検索・置換など、より高度なファイルシステム操作を提供します。

### ファイル権限 \{#file-permissions\}

Daytona SDK は、Python と TypeScript で、ファイル権限の設定・取得や、ディレクトリ権限の再帰的な設定を行うための機能を提供します。

<Tabs>
  <TabItem label="Python" icon="seti:python">
    ```python
    # Set file permissions
    sandbox.fs.set_file_permissions("workspace/file.txt", "644")

    # Get file permissions

    file_info = sandbox.fs.get_file_info("workspace/file.txt")
    print(f"Permissions: {file_info.permissions}")

    ```
  </TabItem>

  <TabItem label="TypeScript" icon="seti:typescript">
    ```typescript
    // Set file permissions
    await sandbox.fs.setFilePermissions("workspace/file.txt", { mode: "644" })

    // Get file permissions
    const fileInfo = await sandbox.fs.getFileDetails("workspace/file.txt")
    console.log(`Permissions: ${fileInfo.permissions}`)
    ```
  </TabItem>
</Tabs>

参照: [set&#95;file&#95;permissions (Python SDK)](/docs/python-sdk/sync/file-system/#filesystemset_file_permissions), [setFilePermissions (TypeScript SDK)](/docs/typescript-sdk/file-system/#setfilepermissions)

### ファイルの検索と置換 \{#file-search-and-replace\}

Daytona SDK では、Python と TypeScript を使ってファイル内のテキストを検索・置換できます。

<Tabs>
  <TabItem label="Python" icon="seti:python">
    ```python
    # ファイル内のテキストを検索します。フォルダーを指定すると、再帰的に検索されます
    results = sandbox.fs.find_files(
        path="workspace/src",
        pattern="text-of-interest"
    )
    for match in results:
        print(f"Absolute file path: {match.file}")
        print(f"Line number: {match.line}")
        print(f"Line content: {match.content}")
        print("\n")

    # ファイル内のテキストを置換します
    sandbox.fs.replace_in_files(
        files=["workspace/file1.txt", "workspace/file2.txt"],
        pattern="old_text",
        new_value="new_text"
    )
    ```
  </TabItem>

  <TabItem label="TypeScript" icon="seti:typescript">
    ```typescript
    // ファイル内のテキストを検索します。フォルダーを指定すると、再帰的に検索されます
    const results = await sandbox.fs.findFiles({
        path="workspace/src",
        pattern: "text-of-interest"
    })
    results.forEach(match => {
        console.log('Absolute file path:', match.file)
        console.log('Line number:', match.line)
        console.log('Line content:', match.content)
    })

    // ファイル内のテキストを置換します
    await sandbox.fs.replaceInFiles(
        ["workspace/file1.txt", "workspace/file2.txt"],
        "old_text",
        "new_text"
    )
    ```
  </TabItem>
</Tabs>

参照: [find&#95;files (Python SDK)](/docs/python-sdk/sync/file-system/#filesystemfind_files), [replace&#95;in&#95;files (Python SDK)](/docs/python-sdk/sync/file-system/#filesystemreplace_in_files), [findFiles (TypeScript SDK)](/docs/typescript-sdk/file-system/#findfiles), [replaceInFiles (TypeScript SDK)](/docs/typescript-sdk/file-system/#replaceinfiles)