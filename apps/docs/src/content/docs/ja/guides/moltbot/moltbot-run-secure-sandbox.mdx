---
title: 安全な Daytona サンドボックスで Moltbot を実行する
description: Daytona サンドボックス内で Moltbot をセットアップして実行し、Telegram および WhatsApp と連携可能な、安全かつ分離された常時稼働の AI アシスタントを構築する方法を解説します。
---

import { TabItem, Tabs } from '@astrojs/starlight/components'

このガイドでは、Daytona のサンドボックス内で [Moltbot](https://www.molt.bot/) をセットアップし、Telegram と WhatsApp のチャネルを設定する手順を説明します。

Daytona のサンドボックス上で Moltbot を実行することで、AI アシスタントをローカルマシンから分離し、コード実行用の安全な環境を提供しつつ、個人のコンピューターを占有することなくボットを 24 時間 365 日オンラインの状態に保つことができます。

### 前提条件 \{#prerequisites\}

* Daytona アカウントと API キー（[Daytona Dashboard](https://app.daytona.io/dashboard/keys) から取得できます）
* ローカルのターミナル（macOS、Linux、または Windows）

### Daytona CLI をインストール \{#install-the-daytona-cli\}

<Tabs syncKey="os">
  <TabItem label="Mac/Linux">
    ```bash
    brew install daytonaio/cli/daytona
    ```
  </TabItem>

  <TabItem label="Windows">
    ```bash
    powershell -Command "irm https://get.daytona.io/windows | iex"
    ```
  </TabItem>
</Tabs>

:::note
すでに CLI をインストール済みの場合は、`daytona --version` でバージョンを確認してください。**0.135.0** 未満の場合は、[最新バージョンにアップグレード](https://www.daytona.io/docs/en/getting-started/#cli)してください。
:::

### Daytona で認証する \{#authenticate-with-daytona\}

API キーを使用して Daytona アカウントにログインします：

```bash
daytona login --api-key=YOUR_API_KEY
```

`YOUR_API_KEY` をご自身の Daytona API キーに置き換えてください。

### サンドボックスを作成する \{#create-a-sandbox\}

Moltbot を実行するサンドボックスを作成します：

```bash
daytona sandbox create --name moltbot --snapshot daytona-medium --auto-stop 0
```

Moltbot はデフォルトの Daytona スナップショットにあらかじめインストールされているため、上記のコマンドを実行するだけで十分です。

:::note
`--auto-stop 0` フラグは自動シャットダウンを無効にし、サンドボックスを手動で停止または削除するまで Moltbot へのアクセスを維持します。Moltbot ゲートウェイには最低 2GB のメモリが必要なため、`daytona-medium` スナップショットが必要です。
:::

### サンドボックスに接続する \{#connect-to-the-sandbox\}

サンドボックスに SSH で接続します：

```bash
daytona ssh moltbot
```

### Moltbot オンボーディングを実行する \{#run-moltbot-onboarding\}

オンボーディングプロセスを開始します。

```bash
clawdbot onboard
```

:::note
以下のモデルプロバイダーの手順は Anthropic 用です。別のプロバイダーを使用する場合は、選択したオプションに応じたプロンプトに従ってください。
:::

次の手順に従って進めてください:

1. **Security acknowledgment:** 承認して続行
2. **Onboarding mode:** **Quickstart** を選択
3. **Model/auth provider:** **Anthropic** を選択
4. **Anthropic auth method:** **Anthropic API key** を選択
5. **Enter Anthropic API key:** API キーを貼り付ける
6. **Default model:** 現在のままにする（デフォルト: `anthropic/claude-opus-4-5`）
7. **Select channel:** **Skip for now** を選択（チャンネルは後で設定します）
8. **Configure skills:** **No** を選択（ニーズに応じて後で設定します）
9. **Enable hooks:** **Skip for now** を選択（ニーズに応じて後で設定します）
10. **Gateway service:** **Skip** を選択（すでにインストール済み）

オンボーディングが完了すると、出力にダッシュボードへのリンクを含む **Dashboard ready** セクションが表示されます。ゲートウェイトークンは、その URL 内の `?token=` の後に続く値です。このトークンはダッシュボードに接続する際に必要になるため、必ず保存してください。

### Gateway を起動する \{#start-the-gateway\}

Gateway をバックグラウンドで起動します：

```bash
nohup clawdbot gateway run > /tmp/gateway.log 2>&1 &
```

`&` はゲートウェイをバックグラウンドプロセスとして実行し、ターミナルを他のコマンド用に空けておきます。`nohup` は、SSH 接続を切断した後でもゲートウェイが動作し続けるようにします。

### ダッシュボードにアクセスする \{#access-the-dashboard\}

Moltbot ダッシュボードは、アシスタントの管理、接続状況の監視、チャネル設定を行うための Web インターフェースです。これにアクセスするには、サンドボックス内で動作しているゲートウェイのポートを外部に公開する [preview URL](https://www.daytona.io/docs/en/preview/) が必要です。

ローカルのターミナル（サンドボックスの SSH セッション内ではなく）で、preview URL を生成します。

```bash
daytona preview-url moltbot --port 18789
```

このコマンドは、ポートを安全に公開するための[署名付きプレビュー URL](https://www.daytona.io/docs/en/preview/#signed-preview-url)を生成します。

ブラウザでその URL を開き、**Overview** セクションに移動し、**Gateway Token** フィールドにゲートウェイ トークンを貼り付けて、**Connect** をクリックします。

:::tip
プレビュー URL はデフォルトで 1 時間後に有効期限が切れます（`--expires` フラグで変更できます）。有効期限が切れたら、同じ CLI コマンドを再度実行して新しい URL を生成してください。
:::

### ブラウザをペアリングする \{#pair-your-browser\}

Moltbot ではセキュリティ対策としてデバイスペアリングを採用しています。承認されたデバイスのみがアシスタントに接続して操作できます。ダッシュボードから初めて接続を試みると、使用しているブラウザは承認が必要な新しいデバイスとして登録されます。

保留中のデバイスリクエストを一覧表示するには：

```bash
clawdbot devices list
```

デバイスを承認する：

```bash
clawdbot devices approve REQUEST_ID
```

`REQUEST_ID` を **Request** 列に表示されている値に置き換えます。

ダッシュボードで **Connect** を再度クリックします。

接続が確立されると、緑色のステータスインジケーターが表示されます。これで Moltbot を利用できる状態になります。

### セキュリティ \{#security\}

この方法で Moltbot を実行すると、次の 3 つのセキュリティレイヤーが提供されます:

1. **プレビュー URL:** ダッシュボードのポートへの時間制限付きアクセス
2. **ゲートウェイトークン:** ダッシュボードへの認証に必要
3. **デバイス承認:** 承認されたデバイスのみが接続してアシスタントを操作可能

たとえ誰かがあなたのダッシュボード URL を取得したとしても、ゲートウェイトークンと承認済みデバイスがなければ接続することはできません。

:::caution
ゲートウェイトークンとプレビュー URL は秘密に保ってください。公開の場で共有しないでください。
:::

***

### Telegram を設定する \{#configure-telegram\}

Moltbot とチャットできるように、Telegram ボットを設定します。

#### Telegram ボットを作成する \{#create-a-telegram-bot\}

1. Telegram を開き、**@BotFather** を検索します
2. `/start` を送信し、続けて `/newbot` を送信します
3. ボットの名前を入力します
4. ボットのユーザー名を入力します
5. 表示されたボットトークンをコピーします

#### Moltbot を設定する \{#configure-moltbot\}

Telegram を有効にし、ボットトークンを設定します。

```bash
clawdbot config set channels.telegram.enabled true
clawdbot config set channels.telegram.botToken YOUR_BOT_TOKEN
```

設定を確認する：

```bash
clawdbot config get channels.telegram
```

#### ゲートウェイを再起動します \{#restart-the-gateway\}

```bash
clawdbot gateway stop
nohup clawdbot gateway run > /tmp/gateway.log 2>&1 &
```

#### 検証を完了する \{#complete-verification\}

1. Telegram でボットのチャットを開き、**Start** をクリックします
2. ペアリングコードが表示されます。ペアリングリクエストを承認してください：

```bash
clawdbot pairing approve telegram PAIRING_CODE
```

これで、Telegram を通じて Moltbot とメッセージのやり取りができるようになりました。

***

### WhatsApp を設定する \{#configure-whatsapp\}

Moltbot とチャットできるように WhatsApp を設定します。

#### 実行設定 \{#run-configuration\}

```bash
clawdbot config --section channels
```

プロンプトが表示されたら、次の手順を実行します。

1. ゲートウェイのロケーションとして **Local (this machine)** を選択します
2. **Configure/link** を選択します
3. **WhatsApp (QR link)** を選択します
4. 「Link WhatsApp now (QR)?」で **Yes** を選択します

#### QRコードをスキャンする \{#scan-the-qr-code\}

スマートフォンで WhatsApp を開き、**Settings → Linked Devices → Link a Device** に進み、ターミナルに表示されている QR コードを読み取ります。

ペアリングが完了すると、次のような表示になります：

```
✅ Linked after restart; web session ready.
```

#### 電話番号を設定する \{#set-up-your-phone-number\}

**This is my personal phone number**（Moltbot 用の電話を別にお持ちの場合はもう一方のオプション）を選択し、表示される指示に従って電話番号を入力します。

#### 設定の完了 \{#finish-configuration\}

別のチャネルを選択するよう求められたら、**Finished** を選択します。次のように表示されます。

```
└  Configure complete.
```

#### チャットを開始する \{#start-chatting\}

WhatsApp で自分宛てにメッセージを送ると、Moltbot が応答します。チャット内で、Moltbot の挙動に関する指示や情報を直接与えることができます。

:::tip
他のユーザーが Moltbot とチャットできるようにするには、ダッシュボード内の **Channels → WhatsApp** の **Allow From** リストに、そのユーザーの電話番号を追加してください。そのユーザーがメッセージを送信すると、Moltbot が応答します。
:::