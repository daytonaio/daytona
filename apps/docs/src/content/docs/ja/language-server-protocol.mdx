---
title: LSP (言語サーバープロトコル)
---

import { TabItem, Tabs } from '@astrojs/starlight/components'

Daytona SDKは、サンドボックスインスタンスを介してLSP (言語サーバープロトコル) をサポートします。これにより、コード補完や診断などの高度な言語機能を利用できます。

## LSP サーバーの作成 \{#creating-lsp-servers\}

Daytona SDK では、Python と TypeScript 向けに LSP サーバーを作成できます。`path_to_project` 引数は、先頭に `/` がない場合、現在のサンドボックスの作業ディレクトリからの相対パスとして解釈されます。作業ディレクトリは Dockerfile に WORKDIR が指定されていればその値が使われ、指定がなければユーザーのホームディレクトリが使用されます。

<Tabs>
  <TabItem label="Python" icon="seti:python">
    ```python
    from daytona import Daytona, LspLanguageId

    # サンドボックスを作成
    daytona = Daytona()
    sandbox = daytona.create()

    # Python 用の LSP サーバーを作成
    lsp_server = sandbox.create_lsp_server(
        language_id=LspLanguageId.PYTHON,
        path_to_project="workspace/project"
    )

    ```
  </TabItem>

  <TabItem label="TypeScript" icon="seti:typescript">
    ```typescript
    import { Daytona, LspLanguageId } from '@daytonaio/sdk'

    // サンドボックスを作成
    const daytona = new Daytona()
    const sandbox = await daytona.create({
        language: 'typescript'
    })

    // TypeScript 用の LSP サーバーを作成
    const lspServer = await sandbox.createLspServer(
        LspLanguageId.TYPESCRIPT,
        "workspace/project"
    )
    ```
  </TabItem>
</Tabs>

参照: [create&#95;lsp&#95;server (Python SDK)](/docs/python-sdk/sync/sandbox#sandboxcreate_lsp_server), [createLspServer (TypeScript SDK)](/docs/typescript-sdk/sandbox#createlspserver)

### 対応言語 \{#supported-languages\}

Daytona SDK で LSP サーバーを作成する際に対応している言語は、`LspLanguageId` 列挙型で定義されています。

| 列挙値                        | 説明                                   |
|------------------------------|----------------------------------------|
| `LspLanguageId.PYTHON`       | Python 用の言語サーバー。              |
| `LspLanguageId.TYPESCRIPT`   | TypeScript/JavaScript 用の言語サーバー。 |

参照: [LspLanguageId（Python SDK）](/docs/python-sdk/sync/lsp-server/#lsplanguageid), [LspLanguageId（TypeScript SDK）](/docs/typescript-sdk/lsp-server/#lsplanguageid)

## LSP 機能 \{#lsp-features\}

Daytona SDK は、コードの解析や編集のための LSP 機能を提供します。

### コード補完 \{#code-completion\}

Daytona SDK は、Python と TypeScript で、ファイル内の特定位置に対するコード補完を取得する機能を提供します。

<Tabs>
  <TabItem label="Python" icon="seti:python">
    ```python
    completions = lsp_server.completions(
        path="workspace/project/main.py",
        position={"line": 10, "character": 15}
    )
    print(f"Completions: {completions}")
    ```
  </TabItem>

  <TabItem label="TypeScript" icon="seti:typescript">
    ```typescript
    const completions = await lspServer.completions(
        "workspace/project/main.ts",
        { line: 10, character: 15 }
    )
    console.log('Completions:', completions)
    ```
  </TabItem>
</Tabs>

参照: [completions（Python SDK）](/docs/python-sdk/sync/lsp-server/#lspservercompletions), [completions（TypeScript SDK）](/docs/typescript-sdk/lsp-server/#completions)