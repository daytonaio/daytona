---
title: "イメージ"
hideTitleOnPage: true
---

## 画像 \{#image\}

```python
class Image(BaseModel)
```

Daytona のサンドボックス用のイメージ定義を表します。
このクラスを直接インスタンス化しないでください。代わりに、`Image.base()`、`Image.debian_slim()`、`Image.from_dockerfile()` などの静的ファクトリーメソッドのいずれかを使用してください。

#### Image.dockerfile \{#imagedockerfile\}

```python
def dockerfile() -> str
```

イメージの Dockerfile を生成して返します。

#### Image.pip_install \{#imagepip_install\}

```python
def pip_install(*packages: str | list[str],
                find_links: list[str] | None = None,
                index_url: str | None = None,
                extra_index_urls: list[str] | None = None,
                pre: bool = False,
                extra_options: str = "") -> "Image"
```

pip を使ってパッケージをインストールするコマンドを追加します。

**引数**:

* `*packages` - インストールするパッケージ。
* `find_links` - list[str] | None: 使用する find-links。
* `index_url` - str | None: 使用するインデックス URL。
* `extra_index_urls` - list[str] | None: 使用する追加のインデックス URL。
* `pre` - bool = False: プレリリース版パッケージをインストールするかどうか。
* `extra_options` - str = &quot;&quot;: pip に渡す追加オプション。指定した文字列は
  pip install コマンドにそのまま渡されます。

**戻り値**:

* `Image` - pip install コマンドが追加されたイメージ。

**例**:

```python
image = Image.debian_slim("3.12").pip_install("requests", "pandas")
```

#### Image.pip_install_from_requirements \{#imagepip_install_from_requirements\}

```python
def pip_install_from_requirements(requirements_txt: str,
                                  find_links: list[str] | None = None,
                                  index_url: str | None = None,
                                  extra_index_urls: list[str] | None = None,
                                  pre: bool = False,
                                  extra_options: str = "") -> "Image"
```

requirements.txt ファイルから依存関係をインストールします。

**引数**:

* `requirements_txt` - str: requirements.txt ファイルへのパス。
* `find_links` - list[str] | None: 使用する find-links。
* `index_url` - str | None: 使用するインデックス URL。
* `extra_index_urls` - list[str] | None: 使用する追加のインデックス URL。
* `pre` - bool = False: プレリリース版パッケージをインストールするかどうか。
* `extra_options` - str = &quot;&quot;: pip に渡す追加オプション。

**戻り値**:

* `Image` - pip のインストールコマンドが追加されたイメージ。

**例**:

```python
image = Image.debian_slim("3.12").pip_install_from_requirements("requirements.txt")
```

#### Image.pip_install_from_pyproject \{#imagepip_install_from_pyproject\}

```python
def pip_install_from_pyproject(pyproject_toml: str,
                               optional_dependencies: list[str],
                               find_links: str | None = None,
                               index_url: str | None = None,
                               extra_index_url: str | None = None,
                               pre: bool = False,
                               extra_options: str = "") -> "Image"
```

pyproject.toml ファイルから依存関係をインストールします。

**引数**:

* `pyproject_toml` - str: pyproject.toml ファイルへのパス。
* `optional_dependencies` - list[str] = []: pyproject.toml からインストールする任意依存関係。
* `find_links` - str | None = None: 使用する find-links。
* `index_url` - str | None = None: 使用するインデックス URL。
* `extra_index_url` - str | None = None: 使用する追加のインデックス URL。
* `pre` - bool = False: プレリリース版パッケージをインストールするかどうか。
* `extra_options` - str = &quot;&quot;: pip に渡す追加オプション。指定した文字列は
  そのまま pip install コマンドに渡されます。

**戻り値**:

* `Image` - pip install コマンドが追加されたイメージ。

**例**:

```python
image = Image.debian_slim("3.12")                 .pip_install_from_pyproject("pyproject.toml", optional_dependencies=["dev"])
```

#### Image.add_local_file \{#imageadd_local_file\}

```python
def add_local_file(local_path: str | Path, remote_path: str) -> "Image"
```

イメージにローカルファイルを追加します。

**引数**:

* `local_path` - str | Path: ローカルファイルのパス。
* `remote_path` - str: イメージ内のファイルのパス。

**返り値**:

* `Image` - ローカルファイルが追加されたイメージ。

**例**:

```python
image = Image.debian_slim("3.12").add_local_file("package.json", "/home/daytona/package.json")
```

#### Image.add_local_dir \{#imageadd_local_dir\}

```python
def add_local_dir(local_path: str | Path, remote_path: str) -> "Image"
```

イメージにローカルディレクトリを追加します。

**引数**:

* `local_path` - str | Path: ローカルディレクトリのパス。
* `remote_path` - str: イメージ内のディレクトリのパス。

**返り値**:

* `Image` - ローカルディレクトリが追加されたイメージ。

**例**:

```python
image = Image.debian_slim("3.12").add_local_dir("src", "/home/daytona/src")
```

#### Image.run_commands \{#imagerun_commands\}

```python
def run_commands(*commands: str | list[str]) -> "Image"
```

イメージ内でコマンドを実行します。

**引数**:

* `*commands` - 実行するコマンド群。

**戻り値**:

* `Image` - コマンドが追加されたイメージ。

**例**:

```python
image = Image.debian_slim("3.12").run_commands(
    'echo "Hello, world!"',
    ['bash', '-c', 'echo Hello, world, again!']
)
```

#### Image.env \{#imageenv\}

```python
def env(env_vars: dict[str, str]) -> "Image"
```

イメージ内の環境変数を設定します。

**引数**:

* `env_vars` - dict[str, str]: 設定する環境変数。

**戻り値**:

* `Image` - 環境変数が追加されたイメージ。

**例**:

```python
image = Image.debian_slim("3.12").env({"PROJECT_ROOT": "/home/daytona"})
```

#### Image.workdir \{#imageworkdir\}

```python
def workdir(path: str | Path) -> "Image"
```

イメージ内の作業ディレクトリを設定します。

**引数**:

* `path` - str | Path: 作業ディレクトリへのパス。

**戻り値**:

* `Image` - 作業ディレクトリが設定されたイメージ。

**例**:

```python
image = Image.debian_slim("3.12").workdir("/home/daytona")
```

#### Image.entrypoint \{#imageentrypoint\}

```python
def entrypoint(entrypoint_commands: list[str]) -> "Image"
```

イメージのエントリポイントを設定します。

**引数**:

* `entrypoint_commands` - list[str]: エントリポイントとして設定するコマンドのリスト。

**戻り値**:

* `Image` - エントリポイントが追加されたイメージ。

**例**:

```python
image = Image.debian_slim("3.12").entrypoint(["/bin/bash"])
```

#### Image.cmd \{#imagecmd\}

```python
def cmd(cmd: list[str]) -> "Image"
```

イメージのデフォルトコマンドを設定します。

**引数**:

* `cmd` - list[str]: デフォルトとして設定するコマンドのリスト。

**戻り値**:

* `Image` - デフォルトコマンドが追加されたイメージ。

**例**:

```python
image = Image.debian_slim("3.12").cmd(["/bin/bash"])
```

#### Image.dockerfile_commands \{#imagedockerfile_commands\}

```python
def dockerfile_commands(dockerfile_commands: list[str],
                        context_dir: Path | str | None = None) -> "Image"
```

イメージに任意の Dockerfile 形式のコマンドを追加します。

**引数**:

* `*dockerfile_commands` - Dockerfile に追加するコマンド。
* `context_dir` - Path | str | None: コンテキスト ディレクトリへのパス。

**戻り値**:

* `Image` - Dockerfile のコマンドが追加されたイメージ。

**例**:

```python
image = Image.debian_slim("3.12").dockerfile_commands(["RUN echo 'Hello, world!'"])
```

#### Image.from_dockerfile \{#imagefrom_dockerfile\}

```python
@staticmethod
def from_dockerfile(path: str | Path) -> "Image"
```

既存の Dockerfile からイメージを作成します。

**引数**:

* `path` - str | Path: Dockerfile へのパス。

**戻り値**:

* `Image` - Dockerfile を基に作成されたイメージ。

**例**:

```python
image = Image.from_dockerfile("Dockerfile")
```

#### Image.base \{#imagebase\}

```python
@staticmethod
def base(image: str) -> "Image"
```

既存のベースイメージから Image を作成します。

**引数**:

* `image` - str: 使用するベースイメージ。

**戻り値**:

* `Image` - 指定したベースイメージを適用した Image オブジェクト。

**例**:

```python
image = Image.base("python:3.12-slim-bookworm")
```

#### Image.debian_slim \{#imagedebian_slim\}

```python
@staticmethod
def debian_slim(
        python_version: SupportedPythonSeries | None = None) -> "Image"
```

公式の Python Docker イメージをベースにした Debian slim イメージを作成します。

**引数**:

* `python_version` - SupportedPythonSeries | None: 使用する Python バージョン。

**戻り値**:

* `Image` - Debian slim イメージが追加されたイメージ。

**例**:

```python
image = Image.debian_slim("3.12")
```

## コンテキスト \{#context\}

```python
class Context(BaseModel)
```

画像のコンテキスト。

**属性**:

* `source_path` *str* - ソースファイルまたはディレクトリへのパス。
* `archive_path` *str | None* - オブジェクトストレージ内のアーカイブファイル内でのパス。
