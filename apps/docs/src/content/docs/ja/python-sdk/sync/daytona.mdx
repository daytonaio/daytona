---
title: "Daytona"
hideTitleOnPage: true
---

## Daytona \{#daytona\}

```python
class Daytona()
```

Daytona API とやり取りするためのメインクラス。

このクラスは Daytona のサンドボックスを作成・管理・操作するためのメソッドを提供します。
明示的な設定を渡すか、環境変数を使用して初期化できます。

**属性**:

* `volume` *VolumeService* - ボリュームを管理するサービス。
* `snapshot` *SnapshotService* - スナップショットを管理するサービス。

**例**:

環境変数を使用する場合:

```python
daytona = Daytona()  # Uses DAYTONA_API_KEY, DAYTONA_API_URL
sandbox = daytona.create()
```

明示的な設定を使用する場合:

```python
config = DaytonaConfig(
    api_key="your-api-key",
    api_url="https://your-api.com",
    target="us"
)
daytona = Daytona(config)
sandbox = daytona.create()
```

#### Daytona.&#95;&#95;init&#95;&#95; \{#daytona&#95;&#95;init&#95;&#95;\}

```python
def __init__(config: Optional[DaytonaConfig] = None)
```

任意の設定で Daytona インスタンスを初期化します。

設定が指定されていない場合は、環境変数から読み込みます:

* `DAYTONA_API_KEY`: 認証に必須の API キー
* `DAYTONA_API_URL`: 必須の API URL
* `DAYTONA_TARGET`: 任意のターゲット環境（既定は &#39;us&#39;）

**引数**:

* `config` *Optional[DaytonaConfig]* - api&#95;key、api&#95;url、target を含むオブジェクト。

**例外**:

* `DaytonaError` - 設定または環境変数のいずれからも API キーが提供されていない場合

**例**:

```python
from daytona import Daytona, DaytonaConfig
# 環境変数を使用
daytona1 = Daytona()

# 明示的な設定を使用
config = DaytonaConfig(
    api_key="your-api-key",
    api_url="https://your-api.com",
    target="us"
)
daytona2 = Daytona(config)

```

#### Daytona.create \{#daytonacreate\}

```python
@overload
def create(params: Optional[CreateSandboxFromSnapshotParams] = None,
           *,
           timeout: Optional[float] = 60) -> Sandbox
```

指定した、またはデフォルトのスナップショットからサンドボックスを作成します。言語、イメージ、環境変数、ボリュームなど、各種パラメータを指定できます。

**引数**:

* `params` *Optional[CreateSandboxFromSnapshotParams]* - サンドボックス作成用のパラメータ。未指定の場合は、
  デフォルトのDaytonaスナップショットとPython言語が使用されます。
* `timeout` *Optional[float]* - サンドボックス作成のタイムアウト（秒）。0はタイムアウトなしを意味します。
  デフォルトは60秒です。

**戻り値**:

* `Sandbox` - 作成されたサンドボックスのインスタンス。

**例外**:

* `DaytonaError` - `timeout`、`auto_stop_interval`、または `auto_archive_interval` が負の値の場合、
  あるいはサンドボックスの起動に失敗した、またはタイムアウトした場合。

**例**:

デフォルトのPythonサンドボックスを作成:

```python
sandbox = daytona.create()
```

カスタムサンドボックスを作成:

```python
params = CreateSandboxFromSnapshotParams(
    language="python",
    snapshot="my-snapshot-id",
    env_vars={"DEBUG": "true"},
    auto_stop_interval=0,
    auto_archive_interval=60,
    auto_delete_interval=120
)
sandbox = daytona.create(params, timeout=40)
```

#### Daytona.create \{#daytonacreate\}

```python
@overload
def create(params: Optional[CreateSandboxFromImageParams] = None,
           *,
           timeout: Optional[float] = 60,
           on_snapshot_create_logs: Callable[[str], None] = None) -> Sandbox
```

レジストリで利用可能な指定イメージ、または宣言的な Daytona イメージからサンドボックスを作成します。
リソース、言語、イメージ、環境変数、ボリュームなど、さまざまなパラメータを指定できます。Daytona は指定されたイメージからスナップショットを作成し、それを用いてサンドボックスを起動します。

**引数**:

* `params` *Optional[CreateSandboxFromImageParams]* - イメージからサンドボックスを作成するためのパラメータ。
* `timeout` *Optional[float]* - サンドボックス作成のタイムアウト（秒）。0 はタイムアウトなしを意味します。
  既定は 60 秒です。
* `on_snapshot_create_logs` *Callable[[str], None]* - スナップショット作成時のログを処理するコールバック関数。

**戻り値**:

* `Sandbox` - 作成されたサンドボックスのインスタンス。

**例外**:

* `DaytonaError` - timeout、auto&#95;stop&#95;interval、または auto&#95;archive&#95;interval が負の場合、または
  サンドボックスの起動に失敗した場合・タイムアウトした場合に発生

**例**:

デフォルトの Python サンドボックスをイメージから作成:

```python
sandbox = daytona.create(CreateSandboxFromImageParams(image="debian:12.9"))
```

宣言的なイメージ定義からカスタムのサンドボックスを作成:

```python
declarative_image = (
    Image.base("alpine:3.18")
    .pipInstall(["numpy", "pandas"])
    .env({"MY_ENV_VAR": "My Environment Variable"})
)
params = CreateSandboxFromImageParams(
    language="python",
    image=declarative_image,
    env_vars={"DEBUG": "true"},
    resources=Resources(cpu=2, memory=4),
    auto_stop_interval=0,
    auto_archive_interval=60,
    auto_delete_interval=120
)
sandbox = daytona.create(
    params,
    timeout=40,
    on_snapshot_create_logs=lambda chunk: print(chunk, end=""),
)
```

#### Daytona.delete \{#daytonadelete\}

```python
def delete(sandbox: Sandbox, timeout: Optional[float] = 60) -> None
```

サンドボックスを削除します。

**引数**:

* `sandbox` *Sandbox* - 削除対象のサンドボックスインスタンス。
* `timeout` *Optional[float]* - サンドボックス削除のタイムアウト（秒）。0 はタイムアウトなしを意味します。
  デフォルトは 60 秒です。

**送出**:

* `DaytonaError` - サンドボックスの削除に失敗した場合、またはタイムアウトした場合

**例**:

```python
sandbox = daytona.create()
# ... サンドボックスを使用 ...
daytona.delete(sandbox)  # 完了時にクリーンアップ
```

#### Daytona.get \{#daytonaget\}

```python
@intercept_errors(message_prefix="Failed to get sandbox: ")
def get(sandbox_id: str) -> Sandbox
```

指定したIDのサンドボックスを取得します。

**引数**:

* `sandbox_id` *str* - 取得対象のサンドボックスID。

**戻り値**:

* `Sandbox` - サンドボックスのインスタンス。

**例外**:

* `DaytonaError` - sandbox&#95;id が指定されていない場合。

**例**:

```python
sandbox = daytona.get("my-sandbox-id")
print(sandbox.status)
```

#### Daytona.find&#95;one \{#daytonafind&#95;one\}

```python
@intercept_errors(message_prefix="Failed to find sandbox: ")
def find_one(sandbox_id: Optional[str] = None,
             labels: Optional[Dict[str, str]] = None) -> Sandbox
```

ID またはラベルでサンドボックスを特定します。

**引数**:

* `sandbox_id` *Optional[str]* - 取得するサンドボックスのID。
* `labels` *Optional[Dict[str, str]]* - サンドボックスを絞り込むためのラベル。

**戻り値**:

* `Sandbox` - ID またはラベルに一致する最初のサンドボックス。

**例外**:

* `DaytonaError` - サンドボックスが見つからなかった場合。

**例**:

```python
sandbox = daytona.find_one(labels={"my-label": "my-value"})
print(f"Sandbox ID: {sandbox.id} State: {sandbox.state}")
```

#### Daytona.list \{#daytonalist\}

```python
@intercept_errors(message_prefix="Failed to list sandboxes: ")
def list(labels: Optional[Dict[str, str]] = None) -> List[Sandbox]
```

ラベルでフィルタリングしたサンドボックスを一覧表示します。

**引数**:

* `labels` *Optional[Dict[str, str]]* - サンドボックスの絞り込みに使用するラベル。

**戻り値**:

* `List[Sandbox]` - 指定したラベルに一致するサンドボックスインスタンスの一覧。

**例**:

```python
sandboxes = daytona.list(labels={"my-label": "my-value"})
for sandbox in sandboxes:
    print(f"{sandbox.id}: {sandbox.status}")
```

#### Daytona.start \{#daytonastart\}

```python
def start(sandbox: Sandbox, timeout: Optional[float] = 60) -> None
```

サンドボックスを起動し、準備が整うまで待機します。

**引数**:

* `sandbox` *Sandbox* - 起動するサンドボックス。
* `timeout` *Optional[float]* - サンドボックスの起動を待機する秒単位の任意のタイムアウト。
  0 はタイムアウトなしを意味します。デフォルトは 60 秒です。

**例外**:

* `DaytonaError` - タイムアウトが負の場合、またはサンドボックスの起動に失敗した／タイムアウトした場合

#### Daytona.stop \{#daytonastop\}

```python
def stop(sandbox: Sandbox, timeout: Optional[float] = 60) -> None
```

サンドボックスを停止し、停止完了まで待機します。

**引数**:

* `sandbox` *Sandbox* - 停止するサンドボックス
* `timeout` *Optional[float]* - サンドボックス停止のタイムアウト（秒）。\
  0 はタイムアウトなしを意味します。デフォルトは 60 秒。

**例外**:

* `DaytonaError` - タイムアウトが負の場合、サンドボックスの停止に失敗した場合、またはタイムアウトした場合

## CodeLanguage \{#codelanguage\}

```python
@dataclass
class CodeLanguage(Enum)
```

Daytona がサポートするプログラミング言語

**列挙体メンバー**:

* `PYTHON` (&quot;python&quot;)
* `TYPESCRIPT` (&quot;typescript&quot;)
* `JAVASCRIPT` (&quot;javascript&quot;)

## DaytonaConfig \{#daytonaconfig\}

```python
class DaytonaConfig(BaseModel)
```

Daytona クライアントを初期化するための設定オプション。

**属性**:

* `api_key` *Optional[str]* - Daytona API への認証に使用する APIキー。未設定の場合は、環境変数 `DAYTONA_API_KEY` で指定するか、代わりに JWT トークンを提供する必要があります。
* `jwt_token` *Optional[str]* - Daytona API への認証に使用する JWT トークン。未設定の場合は、環境変数 `DAYTONA_JWT_TOKEN` で指定するか、代わりに APIキー を提供する必要があります。
* `organization_id` *Optional[str]* - JWT ベースの認証に使用する 組織 ID。JWT トークンが指定されている場合は必須で、ここで指定するか、環境変数 `DAYTONA_ORGANIZATION_ID` に設定する必要があります。
* `api_url` *Optional[str]* - Daytona API の URL。未設定の場合は `'https://app.daytona.io/api'` がデフォルトで使用され、ここまたは環境変数 `DAYTONA_API_URL` で設定できます。
* `server_url` *Optional[str]* - 非推奨。代わりに `api_url` を使用してください。このプロパティは将来のバージョンで削除されます。
* `target` *Optional[str]* - サンドボックスのターゲット (リージョン)。未設定の場合は `'us'` がデフォルトで使用され、ここまたは環境変数 `DAYTONA_TARGET` で設定できます。

**例**:

```python
config = DaytonaConfig(api_key="your-api-key")
```

```python
config = DaytonaConfig(jwt_token="your-jwt-token", organization_id="your-organization-id")
```

## CreateSandboxBaseParams \{#createsandboxbaseparams\}

```python
class CreateSandboxBaseParams(BaseModel)
```

新規サンドボックス作成用の基本パラメーター。

**属性**:

* `language` *Optional[CodeLanguage]* - サンドボックスのプログラミング言語。デフォルトは&quot;python&quot;。
* `os_user` *Optional[str]* - サンドボックスのOSユーザー。
* `env_vars` *Optional[Dict[str, str]]* - サンドボックスに設定する環境変数。
* `labels` *Optional[Dict[str, str]]* - サンドボックスのカスタムラベル。
* `public` *Optional[bool]* - サンドボックスを公開にするかどうか。
* `timeout` *Optional[float]* - サンドボックスの作成・起動に対するタイムアウト（秒）。
* `auto_stop_interval` *Optional[int]* - その間にサンドボックスイベントが発生しない場合に、
  サンドボックスが自動停止するまでの分単位の間隔。デフォルトは15分。
  0は自動停止なしを意味します。
* `auto_archive_interval` *Optional[int]* - 連続して停止状態のサンドボックスが
  自動アーカイブされるまでの分単位の間隔。デフォルトは7日。
  0は最大の間隔が使用されることを意味します。
* `auto_delete_interval` *Optional[int]* - 連続して停止状態のサンドボックスが
  自動削除されるまでの分単位の間隔。デフォルトでは自動削除は無効。
  負の値は無効、0は停止と同時に即時削除を意味します。
* `volumes` *Optional[List[VolumeMount]]* - サンドボックスにアタッチするボリュームマウントの一覧。
* `network_block_all` *Optional[bool]* - サンドボックスの全ネットワークアクセスをブロックするかどうか。
* `network_allow_list` *Optional[str]* - サンドボックスで許可するCIDRネットワークアドレスのカンマ区切りリスト。
* `ephemeral` *Optional[bool]* - サンドボックスをエフェメラルにするかどうか。
  Trueの場合、auto&#95;delete&#95;intervalは0に設定されます。

## CreateSandboxFromImageParams \{#createsandboxfromimageparams\}

```python
class CreateSandboxFromImageParams(CreateSandboxBaseParams)
```

イメージから新しいサンドボックスを作成するためのパラメーター。

**属性**:

* `image` *Union[str, Image]* - サンドボックスに使用するカスタム Docker イメージ。Image オブジェクトが指定された場合、
  イメージは動的にビルドされます。
* `resources` *Optional[Resources]* - サンドボックスのリソース設定。指定しない場合、サンドボックスには
  既定のリソースが割り当てられます。

## CreateSandboxFromSnapshotParams \{#createsandboxfromsnapshotparams\}

```python
class CreateSandboxFromSnapshotParams(CreateSandboxBaseParams)
```

スナップショットから新しいサンドボックスを作成するためのパラメータ。

**属性**:

* `snapshot` *Optional[str]* - サンドボックスに使用するスナップショット名。