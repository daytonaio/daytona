---
title: "Daytona"
hideTitleOnPage: true
---

## Daytona

```python
class Daytona()
```

Daytona API と対話するためのメインクラス。

このクラスは、Daytona サンドボックスの作成・管理・操作のためのメソッドを提供します。
明示的な設定または環境変数を用いて初期化できます。

**属性**:

- `volume` _VolumeService_ - ボリュームを管理するサービス。
- `snapshot` _SnapshotService_ - スナップショットを管理するサービス。
  

**例**:

  環境変数を使用する場合:
```python
daytona = Daytona()  # Uses DAYTONA_API_KEY, DAYTONA_API_URL
sandbox = daytona.create()
```
  
  明示的な設定を使用する場合:
```python
config = DaytonaConfig(
    api_key="your-api-key",
    api_url="https://your-api.com",
    target="us"
)
daytona = Daytona(config)
sandbox = daytona.create()
```

#### Daytona.\_\_init\_\_

```python
def __init__(config: Optional[DaytonaConfig] = None)
```

任意の設定で Daytona インスタンスを初期化します。

設定が提供されない場合、環境変数から読み込みます:
- `DAYTONA_API_KEY`: 認証に必要な API キー
- `DAYTONA_API_URL`: 必須の API URL
- `DAYTONA_TARGET`: 任意のターゲット環境（既定は 'us'）

**引数**:

- `config` _Optional[DaytonaConfig]_ - api_key、api_url、target を含むオブジェクト。
  

**送出**:

- `DaytonaError` - 設定または環境変数のいずれからも API キーが提供されていない場合
  

**例**:

```python
from daytona import Daytona, DaytonaConfig
# Using environment variables
daytona1 = Daytona()

# Using explicit configuration
config = DaytonaConfig(
    api_key="your-api-key",
    api_url="https://your-api.com",
    target="us"
)
daytona2 = Daytona(config)

```

#### Daytona.create

```python
@overload
def create(params: Optional[CreateSandboxFromSnapshotParams] = None,
           *,
           timeout: Optional[float] = 60) -> Sandbox
```

指定された、または既定のスナップショットからサンドボックスを作成します。言語、イメージ、環境変数、ボリュームなど、さまざまなパラメータを指定できます。

**引数**:

- `params` _Optional[CreateSandboxFromSnapshotParams]_ - サンドボックス作成のためのパラメータ。未指定の場合は、
  既定の Daytona スナップショットと Python 言語が使用されます。
- `timeout` _Optional[float]_ - サンドボックス作成のタイムアウト（秒）。0 はタイムアウトなしを意味します。
  既定は 60 秒。
  

**返り値**:

- `Sandbox` - 作成されたサンドボックスインスタンス。
  

**送出**:

- `DaytonaError` - timeout、auto_stop_interval、または auto_archive_interval が負の場合、
  あるいはサンドボックスの起動に失敗した、またはタイムアウトした場合
  

**例**:

  既定の Python サンドボックスを作成:
```python
sandbox = daytona.create()
```
  
  カスタムサンドボックスを作成:
```python
params = CreateSandboxFromSnapshotParams(
    language="python",
    snapshot="my-snapshot-id",
    env_vars={"DEBUG": "true"},
    auto_stop_interval=0,
    auto_archive_interval=60,
    auto_delete_interval=120
)
sandbox = daytona.create(params, timeout=40)
```

#### Daytona.create

```python
@overload
def create(params: Optional[CreateSandboxFromImageParams] = None,
           *,
           timeout: Optional[float] = 60,
           on_snapshot_create_logs: Callable[[str], None] = None) -> Sandbox
```

レジストリで利用可能な指定イメージ、または宣言的な Daytona イメージからサンドボックスを作成します。
リソース、言語、イメージ、環境変数、ボリュームなど、さまざまなパラメータを指定できます。Daytona は提供されたイメージからスナップショットを作成し、それを用いてサンドボックスを作成します。

**引数**:

- `params` _Optional[CreateSandboxFromImageParams]_ - イメージからサンドボックスを作成するためのパラメータ。
- `timeout` _Optional[float]_ - サンドボックス作成のタイムアウト（秒）。0 はタイムアウトなしを意味します。
  既定は 60 秒。
- `on_snapshot_create_logs` _Callable[[str], None]_ - スナップショット作成ログを処理するコールバック関数。
  

**返り値**:

- `Sandbox` - 作成されたサンドボックスインスタンス。
  

**送出**:

- `DaytonaError` - timeout、auto_stop_interval、または auto_archive_interval が負の場合、
  あるいはサンドボックスの起動に失敗した、またはタイムアウトした場合
  

**例**:

  イメージから既定の Python サンドボックスを作成:
```python
sandbox = daytona.create(CreateSandboxFromImageParams(image="debian:12.9"))
```
  
  宣言的なイメージ定義からカスタムサンドボックスを作成:
```python
declarative_image = (
    Image.base("alpine:3.18")
    .pipInstall(["numpy", "pandas"])
    .env({"MY_ENV_VAR": "My Environment Variable"})
)
params = CreateSandboxFromImageParams(
    language="python",
    image=declarative_image,
    env_vars={"DEBUG": "true"},
    resources=Resources(cpu=2, memory=4),
    auto_stop_interval=0,
    auto_archive_interval=60,
    auto_delete_interval=120
)
sandbox = daytona.create(
    params,
    timeout=40,
    on_snapshot_create_logs=lambda chunk: print(chunk, end=""),
)
```

#### Daytona.delete

```python
def delete(sandbox: Sandbox, timeout: Optional[float] = 60) -> None
```

サンドボックスを削除します。

**引数**:

- `sandbox` _Sandbox_ - 削除するサンドボックスインスタンス。
- `timeout` _Optional[float]_ - サンドボックス削除のタイムアウト（秒）。0 はタイムアウトなしを意味します。
  既定は 60 秒です。
  

**送出**:

- `DaytonaError` - サンドボックスの削除に失敗した場合、またはタイムアウトした場合
  

**例**:

```python
sandbox = daytona.create()
# ... サンドボックスを利用 ...
daytona.delete(sandbox)  # 終了時にクリーンアップ
```

#### Daytona.get

```python
@intercept_errors(message_prefix="Failed to get sandbox: ")
def get(sandbox_id: str) -> Sandbox
```

ID でサンドボックスを取得します。

**引数**:

- `sandbox_id` _str_ - 取得するサンドボックスの ID。
  

**戻り値**:

- `Sandbox` - サンドボックスインスタンス。
  

**送出**:

- `DaytonaError` - `sandbox_id` が指定されていない場合。
  

**例**:

```python
sandbox = daytona.get("my-sandbox-id")
print(sandbox.status)
```

#### Daytona.find\_one

```python
@intercept_errors(message_prefix="Failed to find sandbox: ")
def find_one(sandbox_id: Optional[str] = None,
             labels: Optional[Dict[str, str]] = None) -> Sandbox
```

ID またはラベルでサンドボックスを検索します。

**引数**:

- `sandbox_id` _Optional[str]_ - 取得するサンドボックスの ID。
- `labels` _Optional[Dict[str, str]]_ - サンドボックスをフィルタリングするためのラベル。
  

**戻り値**:

- `Sandbox` - ID またはラベルに一致する最初のサンドボックス。
  

**送出**:

- `DaytonaError` - サンドボックスが見つからない場合。
  

**例**:

```python
sandbox = daytona.find_one(labels={"my-label": "my-value"})
print(f"Sandbox ID: {sandbox.id} State: {sandbox.state}")
```

#### Daytona.list

```python
@intercept_errors(message_prefix="Failed to list sandboxes: ")
def list(labels: Optional[Dict[str, str]] = None) -> List[Sandbox]
```

ラベルでフィルタリングされたサンドボックスを一覧表示します。

**引数**:

- `labels` _Optional[Dict[str, str]]_ - サンドボックスをフィルタリングするためのラベル。
  

**戻り値**:

- `List[Sandbox]` - ラベルに一致するサンドボックスインスタンスのリスト。
  

**例**:

```python
sandboxes = daytona.list(labels={"my-label": "my-value"})
for sandbox in sandboxes:
    print(f"{sandbox.id}: {sandbox.status}")
```

#### Daytona.start

```python
def start(sandbox: Sandbox, timeout: Optional[float] = 60) -> None
```

サンドボックスを起動し、準備完了まで待機します。

**引数**:

- `sandbox` _Sandbox_ - 起動するサンドボックス。
- `timeout` _Optional[float]_ - サンドボックスの起動完了を待つ任意のタイムアウト（秒）。
  0 はタイムアウトなしを意味します。既定は 60 秒です。
  

**送出**:

- `DaytonaError` - タイムアウトが負の場合、またはサンドボックスの起動に失敗／タイムアウトした場合

#### Daytona.stop

```python
def stop(sandbox: Sandbox, timeout: Optional[float] = 60) -> None
```

サンドボックスを停止し、停止完了まで待機します。

**引数**:

- `sandbox` _Sandbox_ - 停止するサンドボックス。
- `timeout` _Optional[float]_ - サンドボックス停止の任意のタイムアウト（秒）。
  0 はタイムアウトなしを意味します。既定は 60 秒です。
  

**送出**:

- `DaytonaError` - タイムアウトが負の場合、またはサンドボックスの停止に失敗／タイムアウトした場合


## CodeLanguage

```python
@dataclass
class CodeLanguage(Enum)
```

Daytona がサポートするプログラミング言語

**列挙型メンバー**:
    - `PYTHON` ("python")
    - `TYPESCRIPT` ("typescript")
    - `JAVASCRIPT` ("javascript")

## DaytonaConfig

```python
class DaytonaConfig(BaseModel)
```

Daytona クライアントを初期化するための設定オプション。

**属性**:

- `api_key` _Optional[str]_ - Daytona API で認証するための APIキー。未設定の場合は、環境変数 `DAYTONA_API_KEY` で指定するか、代わりに JWT トークンを指定する必要があります。
- `jwt_token` _Optional[str]_ - Daytona API で認証するための JWT トークン。未設定の場合は、環境変数 `DAYTONA_JWT_TOKEN` で指定するか、代わりに APIキーを指定する必要があります。
- `organization_id` _Optional[str]_ - JWT ベース認証で使用される 組織 ID。JWT トークンが指定された場合に必須で、ここで指定するか、環境変数 `DAYTONA_ORGANIZATION_ID` に設定する必要があります。
- `api_url` _Optional[str]_ - Daytona API の URL。未設定の場合は `'https://app.daytona.io/api'` がデフォルトとなり、ここまたは環境変数 `DAYTONA_API_URL` で設定できます。
- `server_url` _Optional[str]_ - 非推奨です。代わりに `api_url` を使用してください。このプロパティは将来のバージョンで削除されます。
- `target` _Optional[str]_ - サンドボックスのターゲット（リージョン）/ランナーの場所。未設定の場合のデフォルトは `'us'` で、ここまたは環境変数 `DAYTONA_TARGET` で設定できます。
  

**例**:

```python
config = DaytonaConfig(api_key="your-api-key")
```
```python
config = DaytonaConfig(jwt_token="your-jwt-token", organization_id="your-organization-id")
```

## CreateSandboxBaseParams

```python
class CreateSandboxBaseParams(BaseModel)
```

新しいサンドボックスを作成するための基本パラメーター。

**属性**:

- `language` _Optional[CodeLanguage]_ - サンドボックスのプログラミング言語。デフォルトは「python」。
- `os_user` _Optional[str]_ - サンドボックスのOSユーザー。
- `env_vars` _Optional[Dict[str, str]]_ - サンドボックスに設定する環境変数。
- `labels` _Optional[Dict[str, str]]_ - サンドボックスのカスタムラベル。
- `public` _Optional[bool]_ - サンドボックスを公開にするかどうか。
- `timeout` _Optional[float]_ - サンドボックスの作成および起動のタイムアウト（秒）。
- `auto_stop_interval` _Optional[int]_ - 指定した時間内にサンドボックスイベントが発生しなかった場合に自動停止するまでの間隔（分）。デフォルトは15分。
  0は自動停止なしを意味します。
- `auto_archive_interval` _Optional[int]_ - 連続して停止しているサンドボックスが自動的にアーカイブされるまでの間隔（分）。デフォルトは7日。
  0は最大の間隔が使用されることを意味します。
- `auto_delete_interval` _Optional[int]_ - 連続して停止しているサンドボックスが自動的に削除されるまでの間隔（分）。デフォルトでは自動削除は無効です。
  負の値は無効、0は停止直後に即時削除を意味します。
- `volumes` _Optional[List[VolumeMount]]_ - サンドボックスにアタッチするボリュームのマウント一覧。
- `network_block_all` _Optional[bool]_ - サンドボックスのすべてのネットワークアクセスをブロックするかどうか。
- `network_allow_list` _Optional[str]_ - サンドボックスで許可するCIDRネットワークアドレスのカンマ区切りリスト。

## CreateSandboxFromImageParams

```python
class CreateSandboxFromImageParams(CreateSandboxBaseParams)
```

イメージから新しいサンドボックスを作成するためのパラメータ。

**属性**:

- `image` _Union[str, Image]_ - サンドボックスに使用するカスタム Docker イメージ。Image オブジェクトが指定された場合は、
  イメージが動的にビルドされます。
- `resources` _Optional[Resources]_ - サンドボックスのリソース構成。指定しない場合は、サンドボックスに
  既定のリソースが割り当てられます。

## CreateSandboxFromSnapshotParams

```python
class CreateSandboxFromSnapshotParams(CreateSandboxBaseParams)
```

スナップショットから新しいサンドボックスを作成するためのパラメータ。

**属性**:

- `snapshot` _Optional[str]_ - サンドボックスに使用するスナップショット名。

