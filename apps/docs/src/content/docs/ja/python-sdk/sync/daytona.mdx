---
title: "Daytona"
hideTitleOnPage: true
---

## Daytona \{#daytona\}

```python
class Daytona()
```

Daytona API とやり取りするためのメインクラス。

このクラスは Daytona のサンドボックスを作成・管理・操作するためのメソッドを提供します。
明示的な設定を渡すか、環境変数を使用して初期化できます。

**属性**:

* `volume` *VolumeService* - ボリュームを管理するサービス。
* `snapshot` *SnapshotService* - スナップショットを管理するサービス。

**例**:

環境変数を使用する場合:

```python
daytona = Daytona()  # DAYTONA_API_KEY、DAYTONA_API_URL を使用
sandbox = daytona.create()
```

明示的な設定を使用する場合:

```python
config = DaytonaConfig(
    api_key="your-api-key",
    api_url="https://your-api.com",
    target="us"
)
daytona = Daytona(config)
sandbox = daytona.create()
```

OpenTelemetry のトレースを使用する場合:

```python
config = DaytonaConfig(
    api_key="your-api-key",
    experimental={"otelEnabled": True}  # 実験的な設定で OpenTelemetry トレーシングを有効化
)
async with Daytona(config) as daytona:
    sandbox = daytona.create()
    # All SDK operations will be traced
# OpenTelemetry traces are flushed on close
```

#### Daytona.__init \{#daytona__init__\}

```python
def __init__(config: DaytonaConfig | None = None)
```

オプションの設定で Daytona インスタンスを初期化します。

設定が指定されていない場合は、環境変数から読み取ります:

* `DAYTONA_API_KEY`: 認証に必須の API キー
* `DAYTONA_API_URL`: 必須の API URL
* `DAYTONA_TARGET`: 任意のターゲット環境（未指定の場合は、組織のデフォルトリージョンが使用されます）

**引数**:

* `config` *DaytonaConfig | None* - `api_key`、`api_url`、`target` を含むオブジェクト。

**例外**:

* `DaytonaError` - 設定または環境変数のいずれからも API キーが提供されていない場合

**例**:

```python
from daytona import Daytona, DaytonaConfig
# 環境変数を使用する場合
daytona1 = Daytona()

# 明示的に設定を指定する場合
config = DaytonaConfig(
    api_key="your-api-key",
    api_url="https://your-api.com",
    target="us"
)
daytona2 = Daytona(config)

```

#### Daytona.create \{#daytonacreate\}

```python
@overload
def create(params: CreateSandboxFromSnapshotParams | None = None,
           *,
           timeout: float = 60) -> Sandbox
```

指定した、またはデフォルトのスナップショットからサンドボックスを作成します。言語、イメージ、環境変数、ボリュームなど、各種パラメータを指定できます。

**引数**:

* `params` *CreateSandboxFromSnapshotParams | None* - サンドボックス作成用のパラメータ。未指定の場合は、
  デフォルトのDaytonaスナップショットとPython言語が使用されます。
* `timeout` *float* - サンドボックス作成のタイムアウト（秒）。0はタイムアウトなしを意味します。
  デフォルトは60秒です。

**戻り値**:

* `Sandbox` - 作成されたサンドボックスのインスタンス。

**例外**:

* `DaytonaError` - `timeout`、`auto_stop_interval`、または `auto_archive_interval` が負の値の場合、
  あるいはサンドボックスの起動に失敗した、またはタイムアウトした場合。

**例**:

デフォルトのPythonサンドボックスを作成:

```python
sandbox = daytona.create()
```

カスタムサンドボックスを作成:

```python
params = CreateSandboxFromSnapshotParams(
    language="python",
    snapshot="my-snapshot-id",
    env_vars={"DEBUG": "true"},
    auto_stop_interval=0,
    auto_archive_interval=60,
    auto_delete_interval=120
)
sandbox = daytona.create(params, timeout=40)
```

#### Daytona.create \{#daytonacreate\}

```python
@overload
def create(
        params: CreateSandboxFromImageParams | None = None,
        *,
        timeout: float = 60,
        on_snapshot_create_logs: Callable[[str], None] | None = None
) -> Sandbox
```

レジストリで利用可能な指定イメージ、または宣言的な Daytona イメージからサンドボックスを作成します。
リソース、言語、イメージ、環境変数、ボリュームなど、さまざまなパラメータを指定できます。Daytona は指定されたイメージからスナップショットを作成し、それを用いてサンドボックスを起動します。

**引数**:

* `params` *CreateSandboxFromImageParams | None* - イメージからサンドボックスを作成するためのパラメータ。
* `timeout` *float* - サンドボックス作成のタイムアウト（秒）。0 はタイムアウトなしを意味します。
  既定は 60 秒です。
* `on_snapshot_create_logs` *Callable[[str], None] | None* - スナップショット作成時のログを処理するコールバック関数。

**戻り値**:

* `Sandbox` - 作成されたサンドボックスのインスタンス。

**例外**:

* `DaytonaError` - timeout、auto&#95;stop&#95;interval、または auto&#95;archive&#95;interval が負の場合、または
  サンドボックスの起動に失敗した場合・タイムアウトした場合に発生

**例**:

デフォルトの Python サンドボックスをイメージから作成:

```python
sandbox = daytona.create(CreateSandboxFromImageParams(image="debian:12.9"))
```

宣言的イメージ定義からカスタムサンドボックスを作成:

```python
declarative_image = (
    Image.base("alpine:3.18")
    .pipInstall(["numpy", "pandas"])
    .env({"MY_ENV_VAR": "My Environment Variable"})
)
params = CreateSandboxFromImageParams(
    language="python",
    image=declarative_image,
    env_vars={"DEBUG": "true"},
    resources=Resources(cpu=2, memory=4),
    auto_stop_interval=0,
    auto_archive_interval=60,
    auto_delete_interval=120
)
sandbox = daytona.create(
    params,
    timeout=40,
    on_snapshot_create_logs=lambda chunk: print(chunk, end=""),
)
```

#### Daytona.delete \{#daytonadelete\}

```python
@with_instrumentation()
def delete(sandbox: Sandbox, timeout: float = 60) -> None
```

サンドボックスを削除します。

**引数**:

* `sandbox` *Sandbox* - 削除対象のサンドボックスインスタンス。
* `timeout` *float* - サンドボックス削除のタイムアウト（秒）。0 はタイムアウトなしを意味します。
  デフォルトは 60 秒です。

**送出**:

* `DaytonaError` - サンドボックスの削除に失敗した場合、またはタイムアウトした場合

**例**:

```python
sandbox = daytona.create()
# ... サンドボックスを使用 ...
daytona.delete(sandbox)  # 完了時にクリーンアップ
```

#### Daytona.get \{#daytonaget\}

```python
@intercept_errors(message_prefix="サンドボックスの取得に失敗しました: ")
@with_instrumentation()
def get(sandbox_id_or_name: str) -> Sandbox
```

ID または名前でサンドボックスを取得します。

**引数**:

* `sandbox_id_or_name` *str* - 取得するサンドボックスのIDまたは名前。

**戻り値**:

* `Sandbox` - サンドボックスのインスタンス。

**例外**:

* `DaytonaError` - `sandbox_id_or_name` が指定されていない場合。

**例**:

```python
sandbox = daytona.get("my-sandbox-id-or-name")
print(sandbox.state)
```

#### Daytona.find_one \{#daytonafind_one\}

```python
@intercept_errors(message_prefix="サンドボックスの検索に失敗しました: ")
@with_instrumentation()
def find_one(sandbox_id_or_name: str | None = None,
             labels: dict[str, str] | None = None) -> Sandbox
```

ID、名前、またはラベルでサンドボックスを検索します。

**引数**:

* `sandbox_id_or_name` *str | None* - 取得するサンドボックスのIDまたは名前。
* `labels` *dict[str, str] | None* - サンドボックスを絞り込むためのラベル。

**戻り値**:

* `Sandbox` - ID、名前、またはラベルに一致する最初のサンドボックス。

**例外**:

* `DaytonaError` - サンドボックスが見つからなかった場合。

**例**:

```python
sandbox = daytona.find_one(labels={"my-label": "my-value"})
print(f"サンドボックス ID: {sandbox.id} 状態: {sandbox.state}")
```

#### Daytona.list \{#daytonalist\}

```python
@intercept_errors(message_prefix="サンドボックスの一覧取得に失敗しました: ")
@with_instrumentation()
def list(labels: dict[str, str] | None = None,
         page: int | None = None,
         limit: int | None = None) -> PaginatedSandboxes
```

ラベルでフィルタリングされたサンドボックスのページ化リストを返します。

**引数**:

* `labels` *dict[str, str] | None* - サンドボックスをフィルタリングするためのラベル。
* `page` *int | None* - ページ番号（1から開始）。
* `limit` *int | None* - 1ページあたりの最大件数。

**戻り値**:

* `PaginatedSandboxes` - 指定したラベルに一致するサンドボックスのインスタンスのページ化リスト。

**例**:

```python
result = daytona.list(labels={"my-label": "my-value"}, page=2, limit=10)
for sandbox in result.items:
    print(f"{sandbox.id}: {sandbox.state}")
```

#### Daytona.start \{#daytonastart\}

```python
@with_instrumentation()
def start(sandbox: Sandbox, timeout: float = 60) -> None
```

サンドボックスを起動し、準備が整うまで待機します。

**引数**:

* `sandbox` *Sandbox* - 起動するサンドボックス。
* `timeout` *float* - サンドボックスの起動を待機する秒単位の任意のタイムアウト。
  0 はタイムアウトなしを意味します。デフォルトは 60 秒です。

**例外**:

* `DaytonaError` - タイムアウトが負の場合、またはサンドボックスの起動に失敗した／タイムアウトした場合

#### Daytona.stop \{#daytonastop\}

```python
@with_instrumentation()
def stop(sandbox: Sandbox, timeout: float = 60) -> None
```

サンドボックスを停止し、停止完了まで待機します。

**引数**:

* `sandbox` *Sandbox* - 停止するサンドボックス
* `timeout` *float* - サンドボックス停止のタイムアウト（秒）。
  0 はタイムアウトなしを意味します。デフォルトは 60 秒。

**例外**:

* `DaytonaError` - タイムアウトが負の場合、サンドボックスの停止に失敗した場合、またはタイムアウトした場合

## CodeLanguage \{#codelanguage\}

```python
class CodeLanguage(str, Enum)
```

Daytona がサポートするプログラミング言語

**列挙体メンバー**:

* `PYTHON` (&quot;python&quot;)
  * `TYPESCRIPT` (&quot;typescript&quot;)
  * `JAVASCRIPT` (&quot;javascript&quot;)

## DaytonaConfig \{#daytonaconfig\}

```python
class DaytonaConfig(BaseModel)
```

Daytona クライアントを初期化するための設定オプション。

**属性**:

* `api_key` *str | None* - Daytona API で認証を行うための API キー。設定されていない場合は、
  環境変数 `DAYTONA_API_KEY` で指定するか、代わりに JWT トークンを指定する必要があります。
* `jwt_token` *str | None* - Daytona API で認証を行うための JWT トークン。設定されていない場合は、
  環境変数 `DAYTONA_JWT_TOKEN` で指定するか、代わりに API キーを指定する必要があります。
* `organization_id` *str | None* - JWT ベースの認証に使用される組織 ID。JWT トークンが
  指定されている場合に必須で、ここで指定するか、環境変数 `DAYTONA_ORGANIZATION_ID` で設定する必要があります。
* `api_url` *str | None* - Daytona API の URL。ここで指定されていない場合や環境変数 `DAYTONA_API_URL` が
  設定されていない場合は、デフォルトで `'https://app.daytona.io/api'` が使用されます。
* `server_url` *str | None* - 非推奨。代わりに `api_url` を使用してください。このプロパティは
  将来のバージョンで削除されます。
* `target` *str | None* - サンドボックスを実行するランナーのロケーション。ここで指定されていない場合や
  環境変数 `DAYTONA_TARGET` が設定されていない場合は、組織のデフォルトリージョンが使用されます。
* `_experimental` *dict[str, any] | None* - 実験的機能の設定。

**例**:

```python
config = DaytonaConfig(api_key="your-api-key")
```

```python
config = DaytonaConfig(jwt_token="your-jwt-token", organization_id="your-organization-id")
```

## CreateSandboxBaseParams \{#createsandboxbaseparams\}

```python
class CreateSandboxBaseParams(BaseModel)
```

新しいサンドボックスを作成するための基本パラメーター。

**属性**:

* `name` *str | None* - サンドボックスの名前。
* `language` *CodeLanguage | CodeLanguageLiteral | None* - サンドボックスのプログラミング言語。
  デフォルト値は &quot;python&quot;。
* `os_user` *str | None* - サンドボックスの OS ユーザー。
* `env_vars` *dict[str, str] | None* - サンドボックス内で設定する環境変数。
* `labels` *dict[str, str] | None* - サンドボックスに付与するカスタムラベル。
* `public` *bool | None* - サンドボックスをパブリックにするかどうか。
* `timeout` *float | None* - サンドボックスが作成および起動されるまでのタイムアウト（秒）。
* `auto_stop_interval` *int | None* - この間にサンドボックスイベントが発生しなかった場合に、
  サンドボックスが自動的に停止されるまでの時間（分）。デフォルトは 15 分。
  0 は自動停止しないことを意味します。
* `auto_archive_interval` *int | None* - 継続して停止状態にあるサンドボックスが
  自動的にアーカイブされるまでの時間（分）。デフォルトは 7 日。
  0 の場合は利用可能な最大間隔が使用されます。
* `auto_delete_interval` *int | None* - 継続して停止状態にあるサンドボックスが
  自動的に削除されるまでの時間（分）。デフォルトでは自動削除は無効です。
  負の値は無効、0 は停止と同時に即時削除を意味します。
* `volumes` *list[VolumeMount] | None* - サンドボックスにアタッチするボリュームマウントの一覧。
* `network_block_all` *bool | None* - サンドボックスに対するすべてのネットワークアクセスをブロックするかどうか。
* `network_allow_list` *str | None* - サンドボックスに許可する CIDR ネットワークアドレスのカンマ区切りリスト。
* `ephemeral` *bool | None* - サンドボックスをエフェメラル（一時的）にするかどうか。
  True の場合、auto&#95;delete&#95;interval は 0 に設定されます。

## CreateSandboxFromImageParams \{#createsandboxfromimageparams\}

```python
class CreateSandboxFromImageParams(CreateSandboxBaseParams)
```

イメージから新しいサンドボックスを作成するためのパラメーター。

**属性**:

* `image` *str | Image* - サンドボックスに使用するカスタム Docker イメージ。Image オブジェクトが指定された場合、
  イメージは動的にビルドされます。
* `resources` *Resources | None* - サンドボックスのリソース設定。指定しない場合、サンドボックスには
  既定のリソースが割り当てられます。

## CreateSandboxFromSnapshotParams \{#createsandboxfromsnapshotparams\}

```python
class CreateSandboxFromSnapshotParams(CreateSandboxBaseParams)
```

スナップショットから新しいサンドボックスを作成するためのパラメータ。

**属性**:

* `snapshot` *str | None* - サンドボックスに使用するスナップショット名。
