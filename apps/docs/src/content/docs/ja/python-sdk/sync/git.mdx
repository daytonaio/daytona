---
title: "Git"
hideTitleOnPage: true
---

## Git \{#git\}

```python
class Git()
```

サンドボックス内で Git 操作を提供します。

**例**:

```python
# リポジトリをクローンする
sandbox.git.clone(
    url="https://github.com/user/repo.git",
    path="workspace/repo"
)

# リポジトリのステータスを確認する
status = sandbox.git.status("workspace/repo")
print(f"変更されたファイル: {status.modified}")

# 変更をステージしてコミットする
sandbox.git.add("workspace/repo", ["file.txt"])
sandbox.git.commit(
    path="workspace/repo",
    message="ファイルを更新",
    author="John Doe",
    email="john@example.com"
)
```

#### Git.__init__ \{#git__init__\}

```python
def __init__(api_client: GitApi)
```

新しい Git ハンドラーのインスタンスを初期化します。

**引数**:

* `api_client` *GitApi* - サンドボックスの Git 操作用 API クライアント。

#### Git.add \{#gitadd\}

```python
@intercept_errors(message_prefix="ファイルの追加に失敗しました: ")
@with_instrumentation()
def add(path: str, files: list[str]) -> None
```

次回のコミットに指定したファイルをステージします。コマンドラインで
&#39;git add&#39; を実行するのと同様です。

**引数**:

* `path` *str* - Git リポジトリのルートへのパス。相対パスは
  サンドボックスの作業ディレクトリを基準に解決されます。
* `files` *list[str]* - リポジトリのルートからの相対パスで指定する、ステージ対象のファイルまたはディレクトリのパス一覧。

**例**:

```python
# Stage a single file
sandbox.git.add("workspace/repo", ["file.txt"])

# 複数ファイルをステージング
sandbox.git.add("workspace/repo", [
    "src/main.py",
    "tests/test_main.py",
    "README.md"
])
```

#### Git.branches \{#gitbranches\}

```python
@intercept_errors(message_prefix="ブランチの一覧取得に失敗しました: ")
@with_instrumentation()
def branches(path: str) -> ListBranchResponse
```

リポジトリ内のブランチを一覧します。

**引数**:

* `path` *str* - Gitリポジトリのルートへのパス。相対パスはサンドボックスの作業ディレクトリを基準に解決されます。

**戻り値**:

* `ListBranchResponse` - リポジトリ内のブランチの一覧。

**例**:

```python
response = sandbox.git.branches("workspace/repo")
print(f"ブランチ: {response.branches}")
```

#### Git.clone \{#gitclone\}

```python
@intercept_errors(message_prefix="リポジトリのクローンに失敗しました: ")
@with_instrumentation()
def clone(url: str,
          path: str,
          branch: str | None = None,
          commit_id: str | None = None,
          username: str | None = None,
          password: str | None = None) -> None
```

指定したパスに Git リポジトリをクローンします。特定のブランチやコミットのクローンに対応し、認証情報が提供された場合はリモートリポジトリへの認証も行えます。

**引数**:

* `url` *str* - クローン元のリポジトリ URL。
* `path` *str* - リポジトリをクローンするパス。相対パスはサンドボックスの作業ディレクトリを基準に解決されます。
* `branch` *str | None* - クローンするブランチ。未指定の場合は既定のブランチをクローンします。
* `commit_id` *str | None* - チェックアウトするコミット。指定した場合、リポジトリはそのコミットで detached HEAD 状態になります。
* `username` *str | None* - 認証に使用する Git ユーザー名。
* `password` *str | None* - 認証に使用する Git パスワードまたはトークン。

**例**:

```python
# Clone the default branch
sandbox.git.clone(
    url="https://github.com/user/repo.git",
    path="workspace/repo"
)

# 認証を使用して特定のブランチをクローンする
sandbox.git.clone(
    url="https://github.com/user/private-repo.git",
    path="workspace/private",
    branch="develop",
    username="user",
    password="token"
)

# Clone a specific commit
sandbox.git.clone(
    url="https://github.com/user/repo.git",
    path="workspace/repo-old",
    commit_id="abc123"
)
```

#### Git.commit \{#gitcommit\}

```python
@intercept_errors(message_prefix="変更のコミットに失敗しました: ")
@with_instrumentation()
def commit(path: str,
           message: str,
           author: str,
           email: str,
           allow_empty: bool = False) -> GitCommitResponse
```

ステージ済みの変更で新しいコミットを作成します。コミットする前に、必ず add() メソッドで
変更をステージしてください。

**引数**:

* `path` *str* - Gitリポジトリのルートへのパス。相対パスは
  サンドボックスの作業ディレクトリを基準に解決されます。
* `message` *str* - 変更内容を説明するコミットメッセージ。
* `author` *str* - コミットの作成者名。
* `email` *str* - コミット作成者のメールアドレス。
* `allow_empty` *bool, optional* - 変更がステージされていなくても空のコミットを作成できるようにします。デフォルトは False。

**例**:

```python
# 変更をステージングしてコミット
sandbox.git.add("workspace/repo", ["README.md"])
sandbox.git.commit(
    path="workspace/repo",
    message="Update documentation",
    author="John Doe",
    email="john@example.com",
    allow_empty=True
)
```

#### Git.push \{#gitpush\}

```python
@intercept_errors(message_prefix="変更のプッシュに失敗しました: ")
@with_instrumentation()
def push(path: str,
         username: str | None = None,
         password: str | None = None) -> None
```

現在のブランチのすべてのローカルコミットをリモートリポジトリにプッシュします。リモートリポジトリで認証が必要な場合は、ユーザー名とパスワード／トークンを指定してください。

**引数**:

* `path` *str* - Git リポジトリのルートへのパス。相対パスはサンドボックスの作業ディレクトリを基準に解決されます。
* `username` *str | None* - 認証用の Git ユーザー名。
* `password` *str | None* - 認証用の Git パスワードまたはトークン。

**例**:

```python
# 認証なしでプッシュ(パブリックリポジトリまたはSSH用)
sandbox.git.push("workspace/repo")

# 認証ありでプッシュ
sandbox.git.push(
    path="workspace/repo",
    username="user",
    password="github_token"
)
```

#### Git.pull \{#gitpull\}

```python
@intercept_errors(message_prefix="変更のプルに失敗しました: ")
@with_instrumentation()
def pull(path: str,
         username: str | None = None,
         password: str | None = None) -> None
```

リモートリポジトリから変更をプルします。リモートリポジトリで認証が必要な場合は、
ユーザー名とパスワード／トークンを指定してください。

**引数**:

* `path` *str* - Git リポジトリのルートパス。相対パスは
  サンドボックスの作業ディレクトリを基準に解決されます。
* `username` *str | None* - 認証用の Git ユーザー名。
* `password` *str | None* - 認証用の Git パスワードまたはトークン。

**例**:

```python
# 認証なしでプル
sandbox.git.pull("workspace/repo")

# Pull with authentication
sandbox.git.pull(
    path="workspace/repo",
    username="user",
    password="github_token"
)
```

#### Git.status \{#gitstatus\}

```python
@intercept_errors(message_prefix="ステータスの取得に失敗しました: ")
@with_instrumentation()
def status(path: str) -> GitStatus
```

現在の Git リポジトリのステータスを取得します。

**引数**:

* `path` *str* - Git リポジトリのルートへのパス。相対パスは
  サンドボックスの作業ディレクトリを基準に解決されます。

**戻り値**:

* `GitStatus` - リポジトリのステータス情報（以下を含む）:
  * current&#95;branch: 現在のブランチ名
  * file&#95;status: ファイルの状態一覧
  * ahead: リモートへ未プッシュのローカルコミット数
  * behind: ローカルで未取得のリモートコミット数
  * branch&#95;published: ブランチがリモートリポジトリに公開済みかどうか

**例**:

```python
status = sandbox.git.status("workspace/repo")
print(f"ブランチ: {status.current_branch}")
print(f"Commits ahead: {status.ahead}")
print(f"Commits behind: {status.behind}")
```

#### Git.checkout_branch \{#gitcheckout_branch\}

```python
@intercept_errors(message_prefix="ブランチのチェックアウトに失敗しました: ")
@with_instrumentation()
def checkout_branch(path: str, branch: str) -> None
```

リポジトリ内のブランチをチェックアウトします。

**引数**:

* `path` *str* - Git リポジトリのルートへのパス。相対パスは
  サンドボックスの作業ディレクトリを基準に解決されます。
* `branch` *str* - チェックアウトするブランチ名

**例**:

```python
# ブランチをチェックアウト
sandbox.git.checkout_branch("workspace/repo", "feature-branch")
```

#### Git.create_branch \{#gitcreate_branch\}

```python
@intercept_errors(message_prefix="ブランチの作成に失敗しました: ")
@with_instrumentation()
def create_branch(path: str, name: str) -> None
```

リポジトリでブランチを作成します。

**引数**:

* `path` *str* - Gitリポジトリのルートへのパス。相対パスはサンドボックスの作業ディレクトリを基準に解決されます。
* `name` *str* - 作成する新しいブランチ名

**例**:

```python
# 新しいブランチを作成
sandbox.git.create_branch("workspace/repo", "new-feature")
```

#### Git.delete_branch \{#gitdelete_branch\}

```python
@intercept_errors(message_prefix="ブランチの削除に失敗しました: ")
@with_instrumentation()
def delete_branch(path: str, name: str) -> None
```

リポジトリ内のブランチを削除します。

**引数**:

* `path` *str* - Git リポジトリのルートへのパス。相対パスはサンドボックスの作業ディレクトリを基準に解決されます。
* `name` *str* - 削除するブランチ名

**例**:

```python
# ブランチを削除
sandbox.git.delete_branch("workspace/repo", "old-feature")
```

## GitCommitResponse \{#gitcommitresponse\}

```python
class GitCommitResponse()
```

git commit のレスポンス。

**属性**:

* `sha` *str* - コミットのSHA
