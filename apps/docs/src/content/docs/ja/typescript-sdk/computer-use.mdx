---
title: "ComputerUse"
hideTitleOnPage: true
---

## コンピューター使用 \{#computeruse\}

デスクトップ環境とやり取りするためのコンピューター使用機能。

**プロパティ**:

* `display` *Display* - ディスプレイ操作インターフェース
* `keyboard` *Keyboard* - キーボード操作インターフェース
* `mouse` *Mouse* - マウス操作インターフェース
* `recording` *RecordingService* - 画面録画操作インターフェース
* `screenshot` *Screenshot* - スクリーンショット操作インターフェース

サンドボックス内でのデスクトップ操作を自動化するために、マウス、キーボード、スクリーンショット、ディスプレイ、および録画の各操作にアクセスできます。

### コンストラクタ \{#constructors\}

#### new ComputerUse() \{#new-computeruse\}

```ts
new ComputerUse(apiClient: ComputerUseApi): ComputerUse
```

**パラメータ**:

* `apiClient` *ComputerUseApi*

**戻り値**:

* `ComputerUse`

### メソッド \{#methods\}

#### getProcessErrors() \{#getprocesserrors\}

```ts
getProcessErrors(processName: string): Promise<ProcessErrorsResponse>
```

特定の VNC プロセスのエラーログを取得します

**パラメータ**:

* `processName` *string* - エラーログを取得する対象のプロセス名

**戻り値**:

* `Promise<ProcessErrorsResponse>` - プロセスのエラーログ

**例:**

```typescript
const errorsResp = await sandbox.computerUse.getProcessErrors('x11vnc');
console.log('X11VNCエラー:', errorsResp.errors);
```

***

#### getProcessLogs() \{#getprocesslogs\}

```ts
getProcessLogs(processName: string): Promise<ProcessLogsResponse>
```

特定の VNC プロセスのログを取得します

**パラメータ**:

* `processName` *string* - ログを取得する対象のプロセス名

**戻り値**:

* `Promise<ProcessLogsResponse>` - プロセスのログ

**例:**

```typescript
const logsResp = await sandbox.computerUse.getProcessLogs('novnc');
console.log('NoVNC ログ:', logsResp.logs);
```

***

#### getProcessStatus() \{#getprocessstatus\}

```ts
getProcessStatus(processName: string): Promise<ProcessStatusResponse>
```

特定の VNC プロセスのステータスを取得します

**パラメータ**:

* `processName` *string* - 確認対象のプロセス名

**返り値**:

* `Promise<ProcessStatusResponse>` - 指定したプロセスのステータス情報

**例:**

```typescript
const xvfbStatus = await sandbox.computerUse.getProcessStatus('xvfb');
const noVncStatus = await sandbox.computerUse.getProcessStatus('novnc');
```

***

#### getStatus() \{#getstatus\}

```ts
getStatus(): Promise<ComputerUseStatusResponse>
```

すべてのコンピューター使用プロセスのステータスを取得します

**戻り値**:

* `Promise<ComputerUseStatusResponse>` - すべての VNC デスクトッププロセスのステータス情報

**例:**

```typescript
const status = await sandbox.computerUse.getStatus();
console.log('コンピューター使用のステータス:', status.status);
```

***

#### restartProcess() \{#restartprocess\}

```ts
restartProcess(processName: string): Promise<ProcessRestartResponse>
```

特定の VNC プロセスを再起動します

**パラメータ**:

* `processName` *string* - 再起動するプロセス名

**戻り値**:

* `Promise<ProcessRestartResponse>` - プロセス再起動の応答

**例:**

```typescript
const result = await sandbox.computerUse.restartProcess('xfce4');
console.log('XFCE4プロセスを再起動しました:', result.message);
```

***

#### start() \{#start\}

```ts
start(): Promise<ComputerUseStartResponse>
```

すべてのコンピューター使用プロセス（Xvfb、xfce4、x11vnc、novnc）を起動します

**返り値**:

* `Promise<ComputerUseStartResponse>` - コンピューター使用の起動レスポンス

**例:**

```typescript
const result = await sandbox.computerUse.start();
console.log('コンピューター使用プロセスが開始されました:', result.message);
```

***

#### stop() \{#stop\}

```ts
stop(): Promise<ComputerUseStopResponse>
```

すべてのコンピューター使用プロセスを停止します

**戻り値**:

* `Promise<ComputerUseStopResponse>` - コンピューター使用の停止応答

**例:**

```typescript
const result = await sandbox.computerUse.stop();
console.log('コンピューター使用プロセスを停止しました:', result.message);
```

## ディスプレイ \{#display\}

コンピューター使用機能のディスプレイ操作

### コンストラクタ \{#constructors\}

#### new Display() \{#new-display\}

```ts
new Display(apiClient: ComputerUseApi): Display
```

**パラメータ**:

* `apiClient` *ComputerUseApi*

**戻り値**:

* `Display`

### メソッド \{#methods\}

#### getInfo() \{#getinfo\}

```ts
getInfo(): Promise<DisplayInfoResponse>
```

ディスプレイ情報を取得します

**返り値**:

* `Promise<DisplayInfoResponse>` - 既定ディスプレイ（プライマリ）および利用可能なすべてのディスプレイを含む情報

**例:**

```typescript
const info = await sandbox.computerUse.display.getInfo();
console.log(`プライマリディスプレイ: ${info.primary_display.width}x${info.primary_display.height}`);
console.log(`ディスプレイ総数: ${info.total_displays}`);
info.displays.forEach((display, index) => {
  console.log(`ディスプレイ ${index}: ${display.width}x${display.height} (位置: ${display.x},${display.y})`);
});
```

***

#### getWindows() \{#getwindows\}

```ts
getWindows(): Promise<WindowsResponse>
```

開いているウィンドウの一覧を取得します

**戻り値**:

* `Promise<WindowsResponse>` - ID とタイトルを含む開いているウィンドウの一覧

**例:**

```typescript
const windows = await sandbox.computerUse.display.getWindows();
console.log(`${windows.count}個の開いているウィンドウが見つかりました:`);
windows.windows.forEach(window => {
  console.log(`- ${window.title} (ID: ${window.id})`);
});
```

***

## キーボード \{#keyboard\}

コンピューター使用機能向けのキーボード操作

### コンストラクタ \{#constructors\}

#### new Keyboard() \{#new-keyboard\}

```ts
new Keyboard(apiClient: ComputerUseApi): Keyboard
```

**パラメータ**:

* `apiClient` *ComputerUseApi*

**戻り値**:

* `Keyboard`

### メソッド \{#methods\}

#### hotkey() \{#hotkey\}

```ts
hotkey(keys: string): Promise<void>
```

ホットキーの組み合わせを押下します

**パラメータ**:

* `keys` *string* - ホットキーの組み合わせ（例: &#39;ctrl+c&#39;, &#39;alt+tab&#39;, &#39;cmd+shift+t&#39;）

**戻り値**:

* `Promise<void>`

**スロー**:

ホットキー操作に失敗した場合

**使用例:**

```typescript
// コピー
try {
  await sandbox.computerUse.keyboard.hotkey('ctrl+c');
  console.log('操作成功');
} catch (e) {
  console.log('操作失敗:', e);
}

// 貼り付け
try {
  await sandbox.computerUse.keyboard.hotkey('ctrl+v');
  console.log('操作成功');
} catch (e) {
  console.log('操作失敗:', e);
}

// Alt+Tab
try {
  await sandbox.computerUse.keyboard.hotkey('alt+tab');
  console.log('操作成功');
} catch (e) {
  console.log('操作失敗:', e);
}
```

***

#### press() \{#press\}

```ts
press(key: string, modifiers?: string[]): Promise<void>
```

オプションの修飾キーとともにキーを押下します

**パラメータ**:

* `key` *string* - 押すキー（例: &#39;Enter&#39;, &#39;Escape&#39;, &#39;Tab&#39;, &#39;a&#39;, &#39;A&#39;）
* `modifiers?` *string[] = []* - 修飾キー（&#39;ctrl&#39;, &#39;alt&#39;, &#39;meta&#39;, &#39;shift&#39;）

**返り値**:

* `Promise<void>`

**スロー**:

押下に失敗した場合

**例:**

```typescript
// Enterキーを押す
try {
  await sandbox.computerUse.keyboard.press('Return');
  console.log('操作成功');
} catch (e) {
  console.log('操作失敗:', e);
}

// Ctrl+Cを押す
try {
  await sandbox.computerUse.keyboard.press('c', ['ctrl']);
  console.log('操作成功');
} catch (e) {
  console.log('操作失敗:', e);
}

// Ctrl+Shift+Tを押す
try {
  await sandbox.computerUse.keyboard.press('t', ['ctrl', 'shift']);
  console.log('操作成功');
} catch (e) {
  console.log('操作失敗:', e);
}
```

***

#### type() \{#type\}

```ts
type(text: string, delay?: number): Promise<void>
```

指定したテキストをタイプします

**パラメータ**:

* `text` *string* - タイプするテキスト
* `delay?` *number* - 文字ごとの遅延（ミリ秒）

**戻り値**:

* `Promise<void>`

**スロー**:

タイプ処理が失敗した場合

**例:**

```typescript
try {
  await sandbox.computerUse.keyboard.type('Hello, World!');
  console.log('操作成功');
} catch (e) {
  console.log('操作失敗:', e);
}

// 文字間に遅延を設定
try {
  await sandbox.computerUse.keyboard.type('ゆっくり入力', 100);
  console.log('操作成功');
} catch (e) {
  console.log('操作失敗:', e);
}
```

***

## マウス \{#mouse\}

コンピューター使用機能におけるマウス操作

### コンストラクタ \{#constructors\}

#### new Mouse() \{#new-mouse\}

```ts
new Mouse(apiClient: ComputerUseApi): Mouse
```

**パラメータ**:

* `apiClient` *ComputerUseApi*

**戻り値**:

* `Mouse`

### メソッド \{#methods\}

#### click() \{#click\}

```ts
click(
   x: number, 
   y: number, 
   button?: string, 
double?: boolean): Promise<MouseClickResponse>
```

指定した座標でマウスクリックを実行します

**パラメータ**:

* `x` *number* - クリックするX座標
* `y` *number* - クリックするY座標
* `button?` *string = &#39;left&#39;* - 使用するマウスボタン（&#39;left&#39;、&#39;right&#39;、&#39;middle&#39;）
* `double?` *boolean = false* - ダブルクリックを行うか

**戻り値**:

* `Promise<MouseClickResponse>` - クリック操作の結果

**例:**

```typescript
// 左シングルクリック
const result = await sandbox.computerUse.mouse.click(100, 200);

// ダブルクリック
const doubleClick = await sandbox.computerUse.mouse.click(100, 200, 'left', true);

// 右クリック
const rightClick = await sandbox.computerUse.mouse.click(100, 200, 'right');
```

***

#### drag() \{#drag\}

```ts
drag(
   startX: number, 
   startY: number, 
   endX: number, 
   endY: number, 
button?: string): Promise<MouseDragResponse>
```

開始座標から終了座標までマウスをドラッグします

**パラメータ**:

* `startX` *number* - 開始時のx座標
* `startY` *number* - 開始時のy座標
* `endX` *number* - 終了時のx座標
* `endY` *number* - 終了時のy座標
* `button?` *string = &#39;left&#39;* - ドラッグに使用するマウスボタン

**戻り値**:

* `Promise<MouseDragResponse>` - ドラッグ操作の結果

**例:**

```typescript
const result = await sandbox.computerUse.mouse.drag(50, 50, 150, 150);
console.log(`${result.from.x},${result.from.y} から ${result.to.x},${result.to.y} へドラッグしました`);
```

***

#### getPosition() \{#getposition\}

```ts
getPosition(): Promise<MousePositionResponse>
```

現在のマウスカーソルの位置を取得します

**戻り値**:

* `Promise<MousePositionResponse>` - x および y の座標を含む現在のマウス位置

**例:**

```typescript
const position = await sandbox.computerUse.mouse.getPosition();
console.log(`マウスの位置: ${position.x}, ${position.y}`);
```

***

#### move() \{#move\}

```ts
move(x: number, y: number): Promise<MousePositionResponse>
```

マウスカーソルを指定した座標に移動します

**パラメータ**:

* `x` *number* - 移動先のX座標
* `y` *number* - 移動先のY座標

**戻り値**:

* `Promise<MousePositionResponse>` - 移動後の座標

**例:**

```typescript
const result = await sandbox.computerUse.mouse.move(100, 200);
console.log(`マウスを移動しました: ${result.x}, ${result.y}`);
```

***

#### scroll() \{#scroll\}

```ts
scroll(
   x: number, 
   y: number, 
   direction: "up" | "down", 
amount?: number): Promise<boolean>
```

指定した座標でマウスホイールをスクロールします

**パラメータ**:

* `x` *number* - スクロールするX座標
* `y` *number* - スクロールするY座標
* `direction` *スクロール方向* - `"up"` | `"down"`
* `amount?` *number = 1* - スクロール量

**戻り値**:

* `Promise<boolean>` - スクロールが成功したかどうか

**例:**

```typescript
// 上方向にスクロール
const scrollUp = await sandbox.computerUse.mouse.scroll(100, 200, 'up', 3);

// 下方向にスクロール
const scrollDown = await sandbox.computerUse.mouse.scroll(100, 200, 'down', 5);
```

***

## RecordingService \{#recordingservice\}

コンピューター使用機能向けの録画処理を提供します。

### コンストラクタ \{#constructors\}

#### new RecordingService() \{#new-recordingservice\}

```ts
new RecordingService(apiClient: ComputerUseApi): RecordingService
```

**パラメータ**:

* `apiClient` *ComputerUseApi*

**戻り値**:

* `RecordingService`

### メソッド \{#methods\}

#### delete() \{#delete\}

```ts
delete(id: string): Promise<void>
```

ID を指定して録画を削除します

**パラメーター**:

* `id` *string* - 削除する録画の ID

**戻り値**:

* `Promise<void>`

**例:**

```typescript
await sandbox.computerUse.recording.delete(recordingId);
console.log('Recording deleted');
```

***

#### download() \{#download\}

```ts
download(id: string, localPath: string): Promise<void>
```

録画ファイルをダウンロードしてローカルパスに保存します。

ファイルは、ファイル全体をメモリに読み込むことなく、ディスクへ直接ストリーミングされます。

**パラメータ**:

* `id` *string* - ダウンロードする録画の ID
* `localPath` *string* - 録画ファイルをローカルに保存するパス

**戻り値**:

* `Promise<void>`

**例:**

```typescript
// レコーディングをファイルにダウンロード
await sandbox.computerUse.recording.download(recordingId, 'local_recording.mp4');
console.log('Recording downloaded');
```

***

#### get() \{#get\}

```ts
get(id: string): Promise<Recording>
```

ID で指定された特定の Recording の詳細を取得します

**Parameters**:

* `id` *string* - 取得する Recording の ID

**Returns**:

* `Promise<Recording>` - Recording の詳細

**Example:**

```typescript
const recording = await sandbox.computerUse.recording.get(recordingId);
console.log(`Recording: ${recording.fileName}`);
console.log(`Status: ${recording.status}`);
console.log(`Duration: ${recording.durationSeconds} seconds`);
```

***

#### list() \{#list\}

```ts
list(): Promise<ListRecordingsResponse>
```

すべてのレコーディング（進行中および完了済み）を一覧表示します。

**戻り値**:

* `Promise<ListRecordingsResponse>` - すべてのレコーディングのリスト

**例:**

```typescript
const recordings = await sandbox.computerUse.recording.list();
console.log(`Found ${recordings.recordings.length} recordings`);
recordings.recordings.forEach(rec => {
  console.log(`- ${rec.fileName}: ${rec.status}`);
});
```

***

#### start() \{#start\}

```ts
start(label?: string): Promise<Recording>
```

新しい画面録画セッションを開始します

**パラメーター**:

* `label?` *string* - 録画に任意で付与するカスタムラベル

**戻り値**:

* `Promise<Recording>` - 開始された録画の詳細を表す Promise

**例:**

```typescript
// ラベルを指定して録画を開始
const recording = await sandbox.computerUse.recording.start('my-test-recording');
console.log(`Recording started: ${recording.id}`);
console.log(`File: ${recording.filePath}`);
```

***

#### stop() \{#stop\}

```ts
stop(id: string): Promise<Recording>
```

進行中の画面録画セッションを停止します

**Parameters**:

* `id` *string* - 停止する録画の ID

**Returns**:

* `Promise<Recording>` - 停止された録画の詳細

**Example:**

```typescript
const result = await sandbox.computerUse.recording.stop(recording.id);
console.log(`Recording stopped: ${result.durationSeconds} seconds`);
console.log(`Saved to: ${result.filePath}`);
```

***

## スクリーンショット \{#screenshot\}

コンピューター使用機能向けのスクリーンショット操作

### コンストラクタ \{#constructors\}

#### new Screenshot() \{#new-screenshot\}

```ts
new Screenshot(apiClient: ComputerUseApi): Screenshot
```

**パラメータ**:

* `apiClient` *ComputerUseApi*

**戻り値**:

* `Screenshot`

### メソッド \{#methods\}

#### takeCompressed() \{#takecompressed\}

```ts
takeCompressed(options?: ScreenshotOptions): Promise<ScreenshotResponse>
```

画面全体の圧縮スクリーンショットを取得します

**パラメータ**:

* `options?` *ScreenshotOptions = {}* - 圧縮および表示に関するオプション

**戻り値**:

* `Promise<ScreenshotResponse>` - 圧縮済みスクリーンショットデータ

**例:**

```typescript
// デフォルトの圧縮
const screenshot = await sandbox.computerUse.screenshot.takeCompressed();

// 高品質のJPEG
const jpeg = await sandbox.computerUse.screenshot.takeCompressed({
  format: 'jpeg',
  quality: 95,
  showCursor: true
});

// 縮小されたPNG
const scaled = await sandbox.computerUse.screenshot.takeCompressed({
  format: 'png',
  scale: 0.5
});
```

***

#### takeCompressedRegion() \{#takecompressedregion\}

```ts
takeCompressedRegion(region: ScreenshotRegion, options?: ScreenshotOptions): Promise<ScreenshotResponse>
```

特定の領域の圧縮スクリーンショットを取得します

**パラメータ**:

* `region` *ScreenshotRegion* - 取得する領域
* `options?` *ScreenshotOptions = {}* - 圧縮および表示のオプション

**戻り値**:

* `Promise<ScreenshotResponse>` - 圧縮されたスクリーンショットのデータ

**例:**

```typescript
const region = { x: 0, y: 0, width: 800, height: 600 };
const screenshot = await sandbox.computerUse.screenshot.takeCompressedRegion(region, {
  format: 'webp',
  quality: 80,
  showCursor: true
});
console.log(`Compressed size: ${screenshot.size_bytes} bytes`);
```

***

#### takeFullScreen() \{#takefullscreen\}

```ts
takeFullScreen(showCursor?: boolean): Promise<ScreenshotResponse>
```

画面全体のスクリーンショットを取得します

**パラメータ**:

* `showCursor?` *boolean = false* - スクリーンショットにカーソルを表示するか

**戻り値**:

* `Promise<ScreenshotResponse>` - 画像を base64 エンコードしたスクリーンショットデータ

**例:**

```typescript
const screenshot = await sandbox.computerUse.screenshot.takeFullScreen();
console.log(`Screenshot size: ${screenshot.width}x${screenshot.height}`);

// カーソルを表示
const withCursor = await sandbox.computerUse.screenshot.takeFullScreen(true);
```

***

#### takeRegion() \{#takeregion\}

```ts
takeRegion(region: ScreenshotRegion, showCursor?: boolean): Promise<ScreenshotResponse>
```

特定の領域のスクリーンショットを取得します

**パラメータ**:

* `region` *ScreenshotRegion* - キャプチャする領域
* `showCursor?` *boolean = false* - スクリーンショットにカーソルを表示するかどうか

**戻り値**:

* `Promise<ScreenshotResponse>` - 画像を base64 エンコードしたスクリーンショットデータ

**例:**

```typescript
const region = { x: 100, y: 100, width: 300, height: 200 };
const screenshot = await sandbox.computerUse.screenshot.takeRegion(region);
console.log(`キャプチャした領域: ${screenshot.region.width}x${screenshot.region.height}`);
```

***

## ScreenshotOptions \{#screenshotoptions\}

スクリーンショット圧縮オプションのインターフェース

**プロパティ**:

* `format?` *string*
* `quality?` *number*
* `scale?` *number*
* `showCursor?` *boolean*

## ScreenshotRegion \{#screenshotregion\}

スクリーンショット操作で使用される領域座標のインターフェース

**プロパティ**:

* `height` *number*
* `width` *number*
* `x` *number*
* `y` *number*