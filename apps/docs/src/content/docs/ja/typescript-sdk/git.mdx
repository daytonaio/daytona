---
title: "Git"
hideTitleOnPage: true
---

## Git \{#git\}

サンドボックス内でのGit操作を提供します。

### コンストラクタ \{#constructors\}

#### new Git() \{#new-git\}

```ts
new Git(sandboxId: string, toolboxApi: ToolboxApi): Git
```

**パラメータ**:

* `sandboxId` *string*
* `toolboxApi` *ToolboxApi*

**戻り値**:

* `Git`

### メソッド \{#methods\}

#### add() \{#add\}

```ts
add(path: string, files: string[]): Promise<void>
```

次回のコミットに向けて指定したファイルをステージします。コマンドラインで
「git add」を実行するのと同様です。

**パラメータ**:

* `path` *string* - Git リポジトリのルートへのパス。相対パスはサンドボックスの作業ディレクトリを基準に解決されます。
* `files` *string[]* - リポジトリのルートからの相対パスで指定する、ステージ対象のファイルまたはディレクトリの一覧

**戻り値**:

* `Promise<void>`

**例:**

```ts
// 単一ファイルをステージ
await git.add('workspace/repo', ['file.txt']);
```

```ts
// リポジトリ全体をステージング
await git.add('workspace/repo', ['.']);
```

***

#### branches() \{#branches\}

```ts
branches(path: string): Promise<ListBranchResponse>
```

リポジトリ内のブランチを一覧表示します。

**パラメーター**:

* `path` *string* - Git リポジトリのルートへのパス。相対パスはサンドボックスの作業ディレクトリを基準に解決されます。

**戻り値**:

* `Promise<ListBranchResponse>` - リポジトリ内のブランチ一覧

**例:**

```ts
const response = await git.branches('workspace/repo');
console.log(`ブランチ: ${response.branches}`);
```

***

#### checkoutBranch() \{#checkoutbranch\}

```ts
checkoutBranch(path: string, branch: string): Promise<void>
```

リポジトリのブランチをチェックアウトします。

**パラメーター**:

* `path` *string* - Git リポジトリのルートへのパス。相対パスはサンドボックスの作業ディレクトリを基準に解決されます。
* `branch` *string* - チェックアウトするブランチ名

**戻り値**:

* `Promise<void>`

**例:**

```ts
await git.checkoutBranch('workspace/repo', 'new-feature');
```

***

#### clone() \{#clone\}

```ts
clone(
   url: string, 
   path: string, 
   branch?: string, 
   commitId?: string, 
   username?: string, 
password?: string): Promise<void>
```

指定したパスに Git リポジトリをクローンします。特定のブランチまたはコミットのクローンに対応し、認証情報が提供されている場合はリモートリポジトリへの認証も行えます。

**パラメーター**:

* `url` *string* - クローン元のリポジトリ URL
* `path` *string* - リポジトリをクローンするパス。相対パスはサンドボックスの作業ディレクトリを基準に解決されます。
* `branch?` *string* - クローンするブランチ。未指定の場合はデフォルトブランチをクローンします
* `commitId?` *string* - クローンするコミット。指定した場合、リポジトリはこのコミットで detached HEAD 状態になります
* `username?` *string* - 認証用の Git ユーザー名
* `password?` *string* - 認証用の Git パスワードまたはトークン

**戻り値**:

* `Promise<void>`

**使用例:**

```ts
// デフォルトブランチをクローンする
await git.clone(
  'https://github.com/user/repo.git',
  'workspace/repo'
);
```

```ts
// 認証を使用して特定のブランチをクローンする
await git.clone(
  'https://github.com/user/private-repo.git',
  'workspace/private',
  branch='develop',
  username='user',
  password='token'
);
```

```ts
// 特定のコミットをクローンする
await git.clone(
  'https://github.com/user/repo.git',
  'workspace/repo-old',
  commitId='abc123'
);
```

***

#### commit() \{#commit\}

```ts
commit(
   path: string, 
   message: string, 
   author: string, 
   email: string, 
allowEmpty?: boolean): Promise<GitCommitResponse>
```

ステージ済みの変更をコミットします。

**パラメータ**:

* `path` *string* - Git リポジトリのルートへのパス。相対パスはサンドボックスの作業ディレクトリを基準に解決されます。
* `message` *string* - 変更内容を説明するコミットメッセージ
* `author` *string* - コミット作者の名前
* `email` *string* - コミット作者のメールアドレス
* `allowEmpty?` *boolean* - ステージされた変更がない場合でも空のコミットの作成を許可する

**戻り値**:

* `Promise<GitCommitResponse>`

**例:**

```ts
// 変更をステージングしてコミット
await git.add('workspace/repo', ['README.md']);
await git.commit(
  'workspace/repo',
  'ドキュメントを更新',
  'John Doe',
  'john@example.com',
  true
);
```

***

#### createBranch() \{#createbranch\}

```ts
createBranch(path: string, name: string): Promise<void>
```

リポジトリにブランチを作成します。

**パラメーター**:

* `path` *string* - Git リポジトリのルートへのパス。相対パスはサンドボックスの作業ディレクトリを基準に解決されます。
* `name` *string* - 作成する新しいブランチ名

**返り値**:

* `Promise<void>`

**例:**

```ts
await git.createBranch('workspace/repo', 'new-feature');
```

***

#### deleteBranch() \{#deletebranch\}

```ts
deleteBranch(path: string, name: string): Promise<void>
```

リポジトリ内のブランチを削除します。

**パラメーター**:

* `path` *string* - Git リポジトリのルートへのパス。相対パスはサンドボックスの作業ディレクトリを基準に解決されます。
* `name` *string* - 削除するブランチ名

**戻り値**:

* `Promise<void>`

**例:**

```ts
await git.deleteBranch('workspace/repo', 'new-feature');
```

***

#### pull() \{#pull\}

```ts
pull(
   path: string, 
   username?: string, 
password?: string): Promise<void>
```

リモートリポジトリから変更をプルします。

**パラメーター**:

* `path` *string* - Git リポジトリのルートへのパス。相対パスはサンドボックスの作業ディレクトリを基準に解決されます。
* `username?` *string* - 認証用の Git ユーザー名
* `password?` *string* - 認証用の Git パスワードまたはトークン

**戻り値**:

* `Promise<void>`

**例:**

```ts
// パブリックリポジトリからプル
await git.pull('workspace/repo');
```

```ts
// プライベートリポジトリからプル
await git.pull(
  'workspace/repo',
  'user',
  'token'
);
```

***

#### push() \{#push\}

```ts
push(
   path: string, 
   username?: string, 
password?: string): Promise<void>
```

ローカルの変更をリモートリポジトリにプッシュします。

**パラメータ**:

* `path` *string* - Gitリポジトリのルートパス。相対パスはサンドボックスの作業ディレクトリを基準に解決されます。
* `username?` *string* - 認証用のGitユーザー名
* `password?` *string* - 認証用のGitパスワードまたはトークン

**返り値**:

* `Promise<void>`

**例:**

```ts
// パブリックリポジトリにプッシュ
await git.push('workspace/repo');
```

```ts
// プライベートリポジトリにプッシュ
await git.push(
  'workspace/repo',
  'user',
  'token'
);
```

***

#### status() \{#status\}

```ts
status(path: string): Promise<GitStatus>
```

Git リポジトリの現在の状態を取得します。

**パラメーター**:

* `path` *string* - Git リポジトリのルートパス。相対パスはサンドボックスの作業ディレクトリを基準に解決されます。

**戻り値**:

* `Promise<GitStatus>` - 現在のリポジトリの状態。以下を含みます:
  * currentBranch: 現在のブランチ名
  * ahead: リモートブランチより先行しているコミット数
  * behind: リモートブランチより遅れているコミット数
  * branchPublished: ブランチがリモートリポジトリに公開済みかどうか
  * fileStatus: ファイルの状態一覧

**例:**

```ts
const status = await sandbox.git.status('workspace/repo');
console.log(`現在のブランチ: ${status.currentBranch}`);
console.log(`先行コミット数: ${status.ahead}`);
console.log(`遅れコミット数: ${status.behind}`);
```

***

## GitCommitResponse \{#gitcommitresponse\}

git commit のレスポンス。

**プロパティ**:

* `sha` *string* - コミットのSHA