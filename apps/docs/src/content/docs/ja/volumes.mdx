---
title: ボリューム
---

import Label from '@components/Label.astro'
import { Tabs, TabItem } from '@astrojs/starlight/components';

ボリュームは、サンドボックス間でファイルを共有できる FUSE ベースのマウントです。これにより、サンドボックスは大容量ファイルを即座に読み取れ、各サンドボックスへ手動でアップロードする必要がありません。ボリュームのデータは S3 互換のオブジェクトストレージに保存されます。

* 複数のボリュームを 1 つのサンドボックスにマウントできます
* 1 つのボリュームを複数のサンドボックスにマウントできます

## ボリュームの作成 \{#creating-volumes\}

サンドボックスにボリュームをマウントする前に、先に作成しておく必要があります。

<Tabs>
  <TabItem label="Python" icon="seti:python">
    ```bash
    volume = daytona.volume.get("my-volume", create=True)
    ```
  </TabItem>

  <TabItem label="TypeScript" icon="seti:typescript">
    ```bash
    const volume = await daytona.volume.get('my-volume', true)
    ```
  </TabItem>
</Tabs>

参照: [volume.get（Python SDK）](/docs/python-sdk/sync/volume/#volumeserviceget)、[volume.get（TypeScript SDK）](/docs/typescript-sdk/volume/#get)

## ボリュームのマウント \{#mounting-volumes\}

ボリュームを作成したら、`CreateSandboxFromSnapshotParams` オブジェクトで指定してサンドボックスにマウントできます。

<Tabs>
  <TabItem label="Python" icon="seti:python">
    ```python
    import os
    from daytona import CreateSandboxFromSnapshotParams, Daytona, VolumeMount

    daytona = Daytona()

    # Create a new volume or get an existing one
    volume = daytona.volume.get("my-volume", create=True)

    # Mount the volume to the sandbox
    mount_dir_1 = "/home/daytona/volume"

    params = CreateSandboxFromSnapshotParams(
        language="python",
        volumes=[VolumeMount(volumeId=volume.id, mountPath=mount_dir_1)],
    )
    sandbox = daytona.create(params)
    ```
  </TabItem>

  <TabItem label="TypeScript" icon="seti:typescript">
    ```typescript
    import { Daytona } from '@daytonaio/sdk'
    import path from 'path'

    const daytona = new Daytona()

    //  Create a new volume or get an existing one
    const volume = await daytona.volume.get('my-volume', true)

    // Mount the volume to the sandbox
    const mountDir1 = '/home/daytona/volume'

    const sandbox1 = await daytona.create({
      language: 'typescript',
      volumes: [{ volumeId: volume.id, mountPath: mountDir1 }],
    })
    ```
  </TabItem>
</Tabs>

参照: [CreateSandboxFromSnapshotParams（Python SDK）](/docs/python-sdk/sync/daytona#createSandboxBaseParams)、[CreateSandboxFromSnapshotParams（TypeScript SDK）](/docs/typescript-sdk/daytona#createSandboxBaseParams)

## ボリュームの操作 \{#working-with-volumes\}

ボリュームをマウントすると、サンドボックスのファイルシステム内の他のディレクトリと同様に読み書きできます。ボリュームに書き込まれたファイルは、個々のサンドボックスのライフサイクルを超えて保持されます。

<Tabs>
  <TabItem label="Python" icon="seti:python">
    ```python
    # マウントされたボリューム内のファイルに書き込む
    with open("/home/daytona/volume/example.txt", "w") as f:
        f.write("Hello from Daytona volume!")

    # サンドボックスの作業が終わったら削除できます
    # サンドボックスを削除しても、ボリュームは保持されます
    sandbox.delete()
    ```
  </TabItem>

  <TabItem label="TypeScript" icon="seti:typescript">
    ```typescript
    import fs from 'fs/promises'

    // マウントされたボリューム内のファイルに書き込む
    await fs.writeFile('/home/daytona/volume/example.txt', 'Hello from Daytona volume!')

    # サンドボックスの作業が終わったら削除できます
    # サンドボックスを削除しても、ボリュームは保持されます
    await daytona.delete(sandbox1)
    ```
  </TabItem>
</Tabs>

## ボリュームの削除 \{#deleting-volumes\}

ボリュームが不要になった場合は削除できます。

<Tabs>
  <TabItem label="Python" icon="seti:python">
    ```python
    volume = daytona.volume.get("my-volume", create=True)
    daytona.volume.delete(volume)
    ```
  </TabItem>

  <TabItem label="TypeScript" icon="seti:typescript">
    ```typescript
    const volume = await daytona.volume.get('my-volume', true)
    await daytona.volume.delete(volume)
    ```
  </TabItem>
</Tabs>

## 制限事項 \{#limitations\}

ボリュームはFUSEベースのマウントであるため、ブロックストレージへのアクセスを必要とするアプリケーション（データベースのテーブルなど）では使用できません。
ボリュームは、ローカルのサンドボックスのファイルシステムと比べて、読み取り・書き込みの両方の操作が一般的に遅くなります。